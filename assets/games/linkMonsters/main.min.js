(function(){var content=document.getElementById("small-game");content.innerHTML=`<div id="mainDiv"style="left: 50%; top: 50%; margin-left: -160px;margin-top: -240px; z-index: 20; position: absolute; overflow: hidden; width: 320px; height: 480px; "><div style="display: inline; z-index: 0; -webkit-transition: 2000ms; opacity: 1; -webkit-transform: translate(0px, 0px) rotate(0deg); "><div style="width: 320px; height: 480px; left: 0px; top: 0px; position: absolute; background-image: url(./linkMonsters/res/images/majong_BG.png); background-repeat: no-repeat no-repeat; "></div><div style="width: 320px; height: 480px; left: 0px; top: 0px; position: absolute; background-image: url(./linkMonsters/res/images/MAIN_MENU_BG.png); background-repeat: no-repeat no-repeat; "></div><div style="position: absolute; width: 127px; height: 54px; background-image: url(./linkMonsters/res/images/BTN_START.png); left: 97px; top: 423px; display: inline; text-align: center; line-height: 54px; font-family: Arial; font-weight: bold; font-size: 14px; text-shadow: rgb(125, 45, 27) -2px -2px 2px, rgb(125, 45, 27) 2px 2px 2px, rgb(125, 45, 27) 2px -2px 2px, rgb(125, 45, 27) -2px 2px 2px; color: rgb(255, 199, 42); background-position: 0px 0px; background-repeat: no-repeat no-repeat; "></div></div></div><div id="orientationDiv"style="background: url(./linkMonsters/res/images/OrientationWarning.png),black;position: absolute;width: 100%;height: 100%;display: inline;background-position: center 0,0 0;background-size: 50% ,100%;background-repeat: no-repeat; "></div>`;var oHtml=document.getElementsByTagName("html");var oBody=document.getElementsByTagName("body");content.style.width="100%";content.style.height="100%";oHtml[0].style.width="100%";oHtml[0].style.height="100%";oBody[0].style.height="100%";oBody[0].style.background='url("./linkMonsters/res/images/bg.jpg")no-repeat center';oBody[0].style.backgroundSize="100% 100%";(function(){window.FZ={newClass:function(a,b){void 0===a&&(a={});var c=function(){};"function"==typeof b&&b.hasOwnProperty("prototype")?c.prototype=b.prototype:"object"==typeof b&&(c.prototype=b);var e=function(){};if(a.hasOwnProperty("init")||"init"in c.prototype)e=function(){this.init.apply(this,arguments)};e.prototype=new c;e.prototype.constructor=e;for(var f in a)e.prototype[f]=a[f];return e},$:function(a){return document.getElementById(a)},Tools:{splat:function(a){return a?a instanceof Array||"object"==typeof a&&"number"==typeof a.length&&a.callee?a:[a]:[]},bind:function(a,b,c){return function(){return b.apply(a,FZ.Tools.splat(c))}},bindWithEvent:function(a,b,c){return function(e){e=[e];Array.prototype.push.apply(e,FZ.Tools.splat(c));return b.apply(a,e)}},trim:function(a){return a.replace(/^\s+|\s+$/g,"")},extend:function(a,b){for(var c in b)a[c]=b[c]}},EngineOptions:{DebugLevel:"error"},_trace:function(a){"info"===FZ.EngineOptions.DebugLevel&&console.log(a)},_assert:function(a,b){"error"!==FZ.EngineOptions.DebugLevel&&"info"!==FZ.EngineOptions.DebugLevel||a}}})();(function(){FZ.ResourceManager={__ResourceCount:0,__ResourceLoaded:0,__GeneralCallback:null,__GeneralCallbackObj:null,ResourceLib:{},isResourceLoaded:function(){return this.__ResourceCount===this.__ResourceLoaded},addResource:function(a){if(this.ResourceFactory.hasOwnProperty(a.Type)){this.__ResourceCount++;var b={Resource:null,Loaded:!1};this.ResourceLib[a.Name]=b;FZ._trace("Add/load resource["+a.Name+"] : "+a.URL);var c=new this.ResourceFactory[a.Type](a.URL,b);c.setCallback(function(){b.Loaded=!0;FZ.ResourceManager.__ResourceLoaded++;a.callback&&a.callback(b.Resource);FZ.ResourceManager.__GeneralCallback&&FZ.ResourceManager.__GeneralCallback.call()});c.load()}else Throw("Error: Do not suppport Resourcetype:"+a.Type)},setCallback:function(a){this.__GeneralCallback=a},getLoadingRatio:function(){return 0===this.__ResourceCount?1:this.__ResourceLoaded/this.__ResourceCount},ResourceFactory:{},registerResourceType:function(a,b){this.ResourceFactory[a]=b}};FZ.Class_Resource={callback:function(){},init:function(a,b){this.URL=a;this.target=b},setCallback:function(a){this.callback=a}}})();(function(){var a=FZ.newClass({load:function(){var a=new Audio;a.src=this.URL;a.load();var playPromise=a.play();if(playPromise!==undefined){playPromise.then(_=>{a.play()}).catch(error=>{})}a.pause();this.callback();this.target.Resource=a}},FZ.Class_Resource);FZ.ResourceManager.registerResourceType("Audio",a)})();(function(){var a=FZ.newClass({load:function(){this.target.Resource=document.createElement("script");this.target.Resource.addEventListener("load",this.callback,!1);this.target.Resource.src=this.URL;document.body.appendChild(this.target.Resource)}},FZ.Class_Resource);FZ.ResourceManager.registerResourceType("Js",a)})();(function(){var a=FZ.newClass({load:function(){this.target.Resource=new Image;this.target.Resource.addEventListener("load",this.callback,!1);this.target.Resource.addEventListener("error",function(){},!1);this.target.Resource.src=this.URL}},FZ.Class_Resource);FZ.ResourceManager.registerResourceType("Image",a)})();(function(){FZ.stateStatus={};FZ.stateStatus.INIT=0;FZ.stateStatus.NORMAL=5;FZ.stateStatus.HIDENOTIFY=15;FZ.stateStatus.HIDELOGIC=20;FZ.stateStatus.DONOTHING=30;FZ.GameStateBase=FZ.newClass({StateName:"GameStateBase",m_status:FZ.stateStatus.NORMAL,init:function(){FZ.GameBase.registerState(this.StateName,this)},pause:function(){this.m_status=FZ.stateStatus.HIDENOTIFY},resume:function(){this.m_status=FZ.stateStatus.NORMAL},preProcess:function(){},postProcess:function(){},AIUpdate:function(a){},visualUpdate:function(){}});FZ.GameBase={Time:(new Date).getTime(),FrameNum:0,Fps:0,Fps_lastTime:0,Fps_lastFrame:0,DefaultFPS:30,CurrentState:null,__StateLib:{},__stateStack:[],Width:640,Height:480,MainCanvas:null,MainContext:null,Name:"",SaveObject:{},init:function(a){this.MainCanvas=document.createElement("canvas");this.MainCanvas.width=this.Width;this.MainCanvas.height=this.Height;this.MainContext=this.MainCanvas.getContext("2d");this.MainCanvas.addEventListener("mousemove",FZ.Tools.bindWithEvent(FZ.ControlManager,FZ.ControlManager.MouseMove),!1);this.MainCanvas.addEventListener("mousedown",FZ.Tools.bindWithEvent(FZ.ControlManager,FZ.ControlManager.MouseDown),!1);this.MainCanvas.addEventListener("mouseup",FZ.Tools.bindWithEvent(FZ.ControlManager,FZ.ControlManager.MouseUp),!1);this.theInterval=setInterval(FZ.Tools.bind(this,this.update),1E3/this.DefaultFPS);a.appendChild(this.MainCanvas)},update:function(){var a=0,b=null;this.FrameNum++;var a=(new Date).getTime(),c=(a-this.Time)/1E3;this.Time=a;1E3<this.time-this.Fps_lastTime&&(this.Fps=Math.round(10*(this.FrameNum-this.Fps_lastFrame)/((this.Time-this.Fps_lastTime)/1E3))/10,this.Fps_lastTime=this.Time,this.Fps_lastFrame=this.FrameNum);for(a=0;a<this.__stateStack.length;a++)(b=this.__stateStack[a])&&b!==this.CurrentState&&(FZ.stateStatus.NORMAL===b.m_status?(b.AIUpdate(c),b.visualUpdate()):FZ.stateStatus.HIDENOTIFY===b.m_status?b.visualUpdate():FZ.stateStatus.HIDELOGIC===b.m_status?b.AIUpdate(c):FZ.stateStatus.DONOTHING!==b.m_status);null!==this.CurrentState&&(this.CurrentState.AIUpdate(c),this.CurrentState.visualUpdate())},saveGame:function(){FZ._assert(""!=this.Name,"Please set the name of the game first");localStorage["FZ.Game."+this.Name]=FZ.JSON.stringify(this.SaveObject)},loadGame:function(){FZ._assert(""!=this.Name,"Please set the name of the game first");if(""==this.Name)return!1;if(!localStorage.hasOwnProperty("FZ.Game."+this.Name))return this.SaveObject={},!1;this.SaveObject=FZ.JSON.parse(localStorage["FZ.Game."+this.Name]);return!0},registerState:function(a,b){this.__StateLib[a]=b},getState:function(a){return this.__StateLib[a]},switchToState:function(a){var b=[this.CurrentState.StateName];Array.prototype.push.apply(b,arguments);this.CurrentState.postProcess();this.CurrentState=this.__StateLib[a];this.CurrentState.preProcess.apply(this.CurrentState,b);FZ.PrintLog("switchToState")},resetAllState:function(){var a=0,a=this.__stateStack.length;this.__stateStack.splice(0,a)},pushState:function(a){this.__stateStack.push(this.__StateLib[a])},popState:function(){this.CurrentState=this.__stateStack.pop();void 0!==this.CurrentState&&null!==this.CurrentState&&this.CurrentState.resume&&this.CurrentState.resume.apply(this.CurrentState,arguments)}};FZ.GameBase.CurrentState=new FZ.GameStateBase})();(function(){FZ.Sprite=FZ.newClass({__currentIdx:0,__currentFrameTime:0,__matrixDirty:!0,__inverseMatrixDirty:!0,init:function(a,b){this.__theImages=[];this.__children=[];this.__localMatrix=new FZ.Math.Matrix3;this.__worldMatrix=new FZ.Math.Matrix3;this.__inverseMatrix=new FZ.Math.Matrix3;this.__parentSprite=void 0;this.__playing=Boolean(b);if(a&&0!==a.length)for(var c=0,e=a.length;c<e;++c)a[c]instanceof Array?this.__theImages.push([a[c][0],a[c][1]?a[c][1]:0.033]):this.__theImages.push([a[c],0.033]);else this.__currentIdx=-1},clone:function(){var a=new FZ.Sprite;a.__theImages=this.__theImages;a.__localMatrix=this.__localMatrix.clone();a.__currentIdx=0===this.__theImages.length?-1:0;for(var b=0,c=this.__children.length;b<c;++b)a.addChild(this.__children[b].clone());return a},setFrameTime:function(a){if("number"==typeof a)for(var b=0,c=this.__theImages.length;b<c;++b)this.__theImages[b][1]=a;else for(b=0;b<a.length&&b<__theImages.length;++b)this.__theImages[b][1]=a[b]},addChild:function(a){this.__children.push(a);a.__parentSprite=this},update:function(a){if(this.__playing){for(var b=0,c=this.__children.length;b<c;++b)this.__children[b].update(a);if(-1!==this.__currentIdx)for(this.__currentFrameTime+=a;this.__currentFrameTime>this.__theImages[this.__currentIdx][1];)this.__currentFrameTime-=this.__theImages[this.__currentIdx][1],this.__currentIdx++,this.__currentIdx===this.__theImages.length&&(this.__currentIdx=0)}},setFrame:function(a){this.__currentIdx=FZ.Math.clamp(a,0,this.__theImages.length-1)},stop:function(){this.__playing=!1},play:function(){this.__playing=!0},getPosition:function(){this.__DirtyMatrixProcess();var a=new FZ.Math.Vector2(0,0);return a.applyTransform(this.__worldMatrix,a)},localToWorld:function(a){this.__DirtyMatrixProcess();return a.applyTransform(this.__worldMatrix)},worldToLocal:function(a){this.__DirtyInverseMatrixProcess();return a.applyTransform(this.__inverseMatrix)},__markMatrixDirty:function(){if(!this.__matrixDirty){this.__inverseMatrixDirty=this.__matrixDirty=!0;for(var a=0,b=this.__children.length;a<b;++a)this.__children[a].__markMatrixDirty()}},__DirtyInverseMatrixProcess:function(){this.__DirtyMatrixProcess();this.__inverseMatrixDirty&&(this.__worldMatrix.inverseAffine(this.__inverseMatrix),this.__inverseMatrixDirty=!1)},__DirtyMatrixProcess:function(){this.__matrixDirty&&(this.__parentSprite?this.__parentSprite.__worldMatrix.mul(this.__localMatrix,this.__worldMatrix):this.__worldMatrix=this.__localMatrix,this.__matrixDirty=!1)},draw:function(a){this.__DirtyMatrixProcess();for(var b=0,c=this.__children.length;b<c;++b)this.__children[b].draw(a);-1!==this.__currentIdx&&(a.setTransform(this.__worldMatrix.m11,this.__worldMatrix.m12,this.__worldMatrix.m21,this.__worldMatrix.m22,this.__worldMatrix.dx,this.__worldMatrix.dy),a.drawImage(this.__theImages[this.__currentIdx][0],0,0))},translate:function(a,b){this.__localMatrix.translate(a,b);this.__markMatrixDirty()},rotate:function(a){this.__localMatrix.rotate(a);this.__markMatrixDirty()},scale1:function(a){this.__localMatrix.scale1(a);this.__markMatrixDirty()},scale2:function(a,b){this.__localMatrix.scale2(a,b);this.__markMatrixDirty()},makeTranslate:function(a,b){this.__localMatrix.makeTranslate(a,b);this.__markMatrixDirty()},makeRotate:function(a){this.__localMatrix.makeRotate(a);this.__markMatrixDirty()},makeScale1:function(a){this.__localMatrix.makeScale1(a);this.__markMatrixDirty()},makeScale2:function(a,b){this.__localMatrix.makeScale2(a,b);this.__markMatrixDirty()},resetMatrix:function(){this.__localMatrix.identity();this.__markMatrixDirty()}});FZ.spriteManager={__sprites:{},addResource:function(a,b,c,e,f,g){FZ.ResourceManager.addResource({Name:a,Type:"Image",URL:c,callback:function(b){if(1===g)FZ.spriteManager.__sprites[a]=new FZ.Sprite([b]);else{for(var c=[],k=0;k<g;++k){var m=document.createElement("canvas");m.width=b.width/g;m.height=b.height;m.getContext("2d").drawImage(b,b.width/g*k,0,b.width/g,b.height,0,0,b.width/g,b.height);c.push([m])}FZ.spriteManager.__sprites[a]=new FZ.Sprite(c)}FZ.spriteManager.__sprites[a].makeTranslate(e,f)}})},getSprite:function(a){return this.__sprites[a]}}})();(function(){FZ.Math={lerp:function(a,b,c){a=0>a?0:1<a?1:a;return c*a+(1-a)*b},random:function(a,b){return FZ.Math.lerp(Math.random(),a,b)},clamp:function(a,b,c){return a<b?b:a>c?c:a},round:function(a,b){b=Math.pow(10,b||0);return Math.round(a*b)/b},Vector2:FZ.newClass({x:0,y:0,init:function(a,b){void 0!==b&&(this.x=a?a:0,this.y=b?b:0)},clone:function(){return new FZ.Math.Vector2(this.x,this.y)},add:function(a,b){void 0===b&&(b=new FZ.Math.Vector2);b.x=this.x+a.x;b.y=this.y+a.y;return b},sub:function(a,b){void 0===b&&(b=new FZ.Math.Vector2);b.x=this.x-a.x;b.y=this.y-a.y;return b},normalize:function(a){void 0===a&&(a=new FZ.Math.Vector2);var b=1/this.length();a.x=this.x*b;a.y=this.y*b;return a},scale:function(a,b){void 0===b&&(b=new FZ.Math.Vector2);b.x=this.x*a;b.y=this.y*a;return b},applyTransform:function(a,b){void 0===b&&(b=new FZ.Math.Vector2);tx=a.m11*this.x+a.m21*this.y+a.dx;ty=a.m12*this.x+a.m22*this.y+a.dy;b.x=tx;b.y=ty;return b},dot:function(a){return this.x*a.x+this.y*a.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSquared:function(){return this.x*this.x+this.y*this.y}}),Matrix3:FZ.newClass({m11:1,m21:0,dx:0,m12:0,m22:1,dy:0,set:function(a,b,c,e,f,g){this.m11=a;this.m21=c;this.dx=f;this.m12=b;this.m22=e;this.dy=g;return this},clone:function(){var a=new FZ.Math.Matrix3;a.m11=this.m11;a.m21=this.m21;a.m12=this.m12;a.m22=this.m22;a.dx=this.dx;a.dy=this.dy;return a},identity:function(){this.m11=1;this.m12=this.dx=this.m21=0;this.m22=1;this.dy=0;return this},mul:function(a,b){void 0===b&&(b=new FZ.Math.Matrix3);var c=this.m11*a.m21+this.m21*a.m22,e=this.m12*a.m11+this.m22*a.m12,f=this.m12*a.m21+this.m22*a.m22,g=this.dx+this.m11*a.dx+this.m21*a.dx,d=this.dy+this.m12*a.dx+this.m22*a.dy;b.m11=this.m11*a.m11+this.m21*a.m12;b.m21=c;b.m12=e;b.m22=f;b.dx=g;b.dy=d;return b},makeRotate:function(a){var b=Math.sin(a);this.m11=a=Math.cos(a);this.m21=-b;this.m12=b;this.m22=a;return this},rotate:function(a){var b=Math.sin(a);a=Math.cos(a);var c=-this.m11*b+this.m21*a,e=this.m12*a+this.m22*b,f=-this.m12*b+this.m22*a;this.m11=this.m11*a+this.m21*b;this.m21=c;this.m12=e;this.m22=f;return this},makeScale1:function(a){return this.makeScale2(a,a)},scale1:function(a){return this.scale2(a,a)},makeScale2:function(a,b){this.m11=a;this.m22=b;this.m21=this.m12=0;return this},scale2:function(a,b){this.m11*=a;this.m21*=b;this.m12*=a;this.m22*=b;return this},makeTranslate:function(a,b){this.dx=a;this.dy=b;return this},translate:function(a,b){this.dx+=this.m11*a+this.m21*b;this.dy+=this.m12*a+this.m22*b;return this},inverseAffine:function(a){void 0===a&&(a=new FZ.Math.Matrix3);var b=1/(this.m11*this.m22-this.m21*this.m12),c=this.m22*b,e=this.m12*b,f=this.m21*b,b=this.m11*b,g=-(c*this.dx+e*this.dy),d=-(f*this.dx+b*this.dy);a.m11=c;a.m21=e;a.m12=f;a.m22=b;a.dx=g;a.dy=d;return a}})}})();(function(){function a(a){return 10>a?"0"+a:a}function b(a,e){var f,h,l,q,u=g,t,s=e[a];s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(a));"function"==typeof k&&(s=k.call(e,a,s));switch(typeof s){case"string":return c(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";g+=d;t=[];if("[object Array]"===Object.prototype.toString.apply(s)){q=s.length;for(f=0;f<q;f+=1)t[f]=b(f,s)||"null";l=0===t.length?"[]":g?"[\n"+g+t.join(",\n"+g)+"\n"+u+"]":"["+t.join(",")+"]";g=u;return l}if(k&&"object"==typeof k)for(q=k.length,f=0;f<q;f+=1)h=k[f],"string"==typeof h&&(l=b(h,s),l&&t.push(c(h)+(g?": ":":")+l));else for(h in s)Object.hasOwnProperty.call(s,h)&&(l=b(h,s),l&&t.push(c(h)+(g?": ":":")+l));l=0===t.length?"{}":g?"{\n"+g+t.join(",\n"+g)+"\n"+u+"}":"{"+t.join(",")+"}";g=u;return l}}function c(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var b=h[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}FZ.JSON={parse:function(a,b){function c(a,d){var e,f,g=a[d];if(g&&"object"==typeof g)for(e in g)Object.hasOwnProperty.call(g,e)&&(f=c(g,e),void 0!==f?g[e]=f:delete g[e]);return b.call(a,d,g)}var d;a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"==typeof b?c({"":d},""):d;throw new SyntaxError("JSON.parse");},stringify:function(a,c,e){var f;d=g="";if("number"==typeof e)for(f=0;f<e;f+=1)d+=" ";else"string"==typeof e&&(d=e);if((k=c)&&"function"!=typeof c&&("object"!=typeof c||"number"!=typeof c.length))throw Error("JSON.stringify");return b("",{"":a})}};var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,d,h={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()})})();(function(){FZ.ArrayIndexof=function(a,b){for(var c=0,c=0;c<a.length;c++)if(b===a[c])return c;return-1};FZ.ControlManager={m_monitor_list:[],Mouse:{x:0,y:0,leftKey:!1,middleKey:!1,rightKey:!1},MouseMove:function(a){a.offsetX?(this.Mouse.x=a.offsetX,this.Mouse.y=a.offsetY):a.layerX&&(this.Mouse.x=a.layerX-FZ.GameBase.MainCanvas.offsetLeft,this.Mouse.y=a.layerY-FZ.GameBase.MainCanvas.offsetTop)},MouseUp:function(a){if(0===a.button)for(this.Mouse.leftKey=!1,a=0;a<this.m_monitor_list.length;a++){var b=this.m_monitor_list[a];b&&b.CustomMouseUp&&b.CustomMouseUp(this.Mouse)}},MouseDown:function(a){if(0===a.button)for(this.Mouse.leftKey=!0,a=0;a<this.m_monitor_list.length;a++){var b=this.m_monitor_list[a];b&&b.CustomMouseDown&&b.CustomMouseDown(this.Mouse)}},addMonitor:function(a){-1===FZ.ArrayIndexof(this.m_monitor_list,a)&&this.m_monitor_list.push(a)},removeMonitor:function(a){a=FZ.ArrayIndexof(this.m_monitor_list,a);-1!==a&&this.m_monitor_list.splice(a,1)},clearMonitor:function(){for(;0<this.m_monitor_list.length;)this.m_monitor_list.pop()}}})();(function(){FZ.Music={theAudio:null,theIntervalId:0,isMute:!1,set:function(a,b){this.loop=Boolean(b);this.theAudio=a;a.loop=b},setMute:function(a){(this.isMute=a)?this.stop():this.play()},play:function(){this.isMute||(this.stop(),this.theAudio.play().then(_=>{this.theAudio.play()}).catch(error=>{}),this.theAudio.duration&&(this.loop?this.theIntervalId=window.setInterval(this.replay,Math.floor(1E3*this.theAudio.duration)-1E3):window.setTimeout(function(){this.theAudio.pause();try{this.theAudio.currentTime=0}catch(a){}},Math.floor(1E3*this.theAudio.duration)-1E3)))},stop:function(){if(this.theAudio){this.theAudio.pause();try{this.theAudio.currentTime=0}catch(a){}window.clearInterval(this.theIntervalId)}},replay:function(){FZ.Music.stop();FZ.Music.play()},pageHide:function(a){FZ.Music.theAudio&&FZ.Music.stop()},pageShow:function(a){FZ.Music.theAudio&&FZ.Music.play()}};window.addEventListener("pagehide",FZ.Music.pageHide,!1);window.addEventListener("pageshow",FZ.Music.pageShow,!1)})();(function(){FZ.SpilAPI={SubmitScore:function(a){FZ.SpilAPI.checkSpilAPI();SpilGames.Highscores.insert({score:a})},ShowHighscore:function(){FZ.SpilAPI.checkSpilAPI();!FZ.SpilAPI.___noSpilGamesAPI&&FZ.GameBase&&FZ.GameBase.pauseGame();SpilGames.Highscores.showScoreboard(function(){FZ.GameBase&&FZ.GameBase.resumeGame()})},GetSplashScreenURL:function(){FZ.SpilAPI.checkSpilAPI();return FZ.SpilAPI.___noSpilGamesAPI?"":SpilGames.Settings.get("currentGameInfo").splashScreen},GetPortraitLockURL:function(){FZ.SpilAPI.checkSpilAPI();return FZ.SpilAPI.___noSpilGamesAPI?"":SpilGames.Settings.get("currentGameInfo").rotationLockSreen.portrait},GetLandscapeLockURL:function(){FZ.SpilAPI.checkSpilAPI();return FZ.SpilAPI.___noSpilGamesAPI?"":SpilGames.Settings.get("currentGameInfo").rotationLockSreen.landscape},checkSpilAPI:function(){return!FZ.SpilAPI.___noSpilGamesAPI},init:function(){FZ.SpilAPI.___noSpilGamesAPI=!window.SpilGames;window.SpilGames||(window.SpilGames={_:function(a){var b=arguments,c=0;return a.replace(/%s/g,function(a){c++;return void 0!==b[c]?b[c]:a})},Highscores:{insert:function(a){FZ.__localSubmitHighscore&&FZ.__localSubmitHighscore(a.score)},showScoreboard:function(a){FZ.__localShowHighscore&&FZ.__localShowHighscore(a)}}})}};FZ.SpilAPI.init()})();(function(){FZ.StateDefs={STATE_UNKNOW:-1,STATE_INIT:5,STATE_LOAD:10,STATE_NORMAL:15,STATE_HIDE:20,STATE_SHOW_NO_LOGIC:25,STATE_UNLOAD:30,STATE_DESTROY:35,GAME_STATE_UNKNOW:"",GAME_STATE_PRELOADING:"gamepreloading",GAME_STATE_LOADING:"gameloading",GAME_STATE_LOGO:"gamelogo",GAME_STATE_MAINMEN:"gamemainmenu",GAME_STATE_GAME_IN:"gamein",GAME_STATE_GAME_CLEAR:"gameclear",GAME_STATE_OVER:"gameover",GAME_STATE_RESET:"gamereset",GAME_STATE_NEXT_LEVEL:"gamenextlevel",GAME_STATE_GAME_WIN:"gamewin",GAME_STATE_CREDITS:"gamecredits",GAME_STATE_HELP:"gamehelp"}})();FZ.IphoneMusic=["./linkMonsters/res/music/farmLink.mp3"];(function(){FZ.IphoneUI=[{name:"ARROW_DOWN",zOrder:0,fileURL:"ARROW_DOWN.png",x:138,y:112,w:45,h:192,tags:[],cols:1},{name:"ARROW_LEFT",zOrder:0,fileURL:"ARROW_LEFT.png",x:64,y:214,w:192,h:45,tags:[],cols:1},{name:"ARROW_LEFT_RIGHT",zOrder:0,fileURL:"ARROW_LEFT_RIGHT.png",x:55,y:214,w:210,h:45,tags:[],cols:1},{name:"ARROW_RIGHT",zOrder:0,fileURL:"ARROW_RIGHT.png",x:64,y:214,w:192,h:45,tags:[],cols:1},{name:"ARROW_UP",zOrder:0,fileURL:"ARROW_UP.png",x:138,y:112,w:45,h:192,tags:[],cols:1},{name:"ARROW_UP_DOWN",zOrder:0,fileURL:"ARROW_UP_DOWN.png",x:138,y:121,w:45,h:210,tags:[],cols:1},{name:"BTN_GAME_BACK",zOrder:2,fileURL:"BTN_GAME_BACK.png",x:267,y:32,w:40,h:40,tags:[],cols:1},{name:"BTN_GAME_BACK_TOUCH",zOrder:2,fileURL:"BTN_GAME_BACK_TOUCH.png",x:268,y:32,w:40,h:40,tags:[],cols:1},{name:"BTN_HINT",zOrder:2,fileURL:"BTN_HINT.png",x:225,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_HINT_GREY",zOrder:2,fileURL:"BTN_HINT_GREY.png",x:225,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_HINT_TOUCH",zOrder:2,fileURL:"BTN_HINT_TOUCH.png",x:225,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_MAIN_MENU",zOrder:4,fileURL:"BTN.png",x:102,y:351,w:127,h:54,tags:[],cols:1},{name:"BTN_MAIN_MENU_ICON",zOrder:2,fileURL:"BTN_MAIN_MENU_ICON.png",x:215,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_MAIN_MENU_ICON_TOUCH",zOrder:2,fileURL:"BTN_MAIN_MENU_ICON_TOUCH.png",x:215,y:32,w:41,h:38,tags:[],cols:1},{name:"BTN_MAIN_MENU_TOUCH",zOrder:4,fileURL:"BTN_TOUCH.png",x:102,y:351,w:127,h:54,tags:[],cols:1},{name:"BTN_NEXT_LEVEL",zOrder:4,fileURL:"BTN.png",x:105,y:354,w:127,h:54,tags:[],cols:1},{name:"BTN_NEXT_LEVEL_TOUCH",zOrder:4,fileURL:"BTN_TOUCH.png",x:105,y:354,w:127,h:54,tags:[],cols:1},{name:"BTN_PAUSE",zOrder:2,fileURL:"BTN_PAUSE.png",x:265,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_PAUSE_TOUCH",zOrder:2,fileURL:"BTN_PAUSE_TOUCH.png",x:265,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_RETRY",zOrder:5,fileURL:"BTN.png",x:98,y:298,w:127,h:54,tags:[],cols:1},{name:"BTN_RETRY_TOUCH",zOrder:5,fileURL:"BTN_TOUCH.png",x:98,y:298,w:127,h:54,tags:[],cols:1},{name:"BTN_MENU_SOUND",zOrder:2,fileURL:"BTN_SOUND.png",x:260,y:25,w:40,h:40,tags:[],cols:1},{name:"BTN_MENU_SOUND_OFF",zOrder:2,fileURL:"BTN_SOUND_OFF.png",x:260,y:25,w:40,h:40,tags:[],cols:1},{name:"BTN_MENU_SOUND_OFF_TOUCH",zOrder:2,fileURL:"BTN_SOUND_OFF_TOUCH.png",x:260,y:25,w:40,h:40,tags:[],cols:1},{name:"BTN_MENU_SOUND_TOUCH",zOrder:2,fileURL:"BTN_SOUND_TOUCH.png",x:260,y:25,w:40,h:40,tags:[],cols:1},{name:"BTN_SOUND",zOrder:2,fileURL:"BTN_SOUND.png",x:185,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_SOUND_OFF",zOrder:2,fileURL:"BTN_SOUND_OFF.png",x:185,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_SOUND_OFF_TOUCH",zOrder:2,fileURL:"BTN_SOUND_OFF_TOUCH.png",x:185,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_SOUND_TOUCH",zOrder:2,fileURL:"BTN_SOUND_TOUCH.png",x:185,y:23,w:40,h:40,tags:[],cols:1},{name:"BTN_START",zOrder:2,fileURL:"BTN_START.png",x:97,y:423,w:127,h:54,tags:[],cols:1},{name:"BTN_START_TOUCH",zOrder:2,fileURL:"BTN_START_TOUCH.png",x:97,y:423,w:127,h:54,tags:[],cols:1},{name:"gameIn_BG",zOrder:0,fileURL:"gameIn_BG.png",x:0,y:0,w:320,h:480,tags:[],cols:1},{name:"GAME_OVER_BG",zOrder:3,fileURL:"GAME_OVER_BG.png",x:3,y:132,w:313,h:195,tags:[],cols:1},{name:"loading_empty",zOrder:2,fileURL:"loading_empty.png",x:51,y:217,w:218,h:43,tags:[],cols:1},{name:"loading_full",zOrder:2,fileURL:"loading_full.png",x:51,y:217,w:218,h:43,tags:[],cols:1},{name:"MAIN_MENU_BG",zOrder:0,fileURL:"MAIN_MENU_BG.png",x:0,y:0,w:320,h:480,tags:[],cols:1},{name:"MAIN_MENU_AND_LOADING_BG",zOrder:1,fileURL:"MAIN_MENU_AND_LOADING_BG.png",x:12,y:71,w:303,h:396,tags:[],cols:1},{name:"majong_BG",zOrder:0,fileURL:"majong_BG.png",x:0,y:0,w:320,h:480,tags:[],cols:1},{name:"NEXT_LEVEL_BG",zOrder:2,fileURL:"NEXT_LEVEL_BG.png",x:8,y:110,w:305,h:279,tags:[],cols:1},{name:"NO_MORE_MATCHS",zOrder:3,fileURL:"NO_MORE_MATCHS.png",x:32,y:205,w:257,h:94,tags:[],cols:1},{name:"number_hint_clone_0",zOrder:2,fileURL:"number_hint_0.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_1",zOrder:2,fileURL:"number_hint_1.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_2",zOrder:2,fileURL:"number_hint_2.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_3",zOrder:2,fileURL:"number_hint_3.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_4",zOrder:2,fileURL:"number_hint_4.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_5",zOrder:2,fileURL:"number_hint_5.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_6",zOrder:2,fileURL:"number_hint_6.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_7",zOrder:2,fileURL:"number_hint_7.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_8",zOrder:2,fileURL:"number_hint_8.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_clone_9",zOrder:2,fileURL:"number_hint_9.png",x:255,y:60,w:10,h:12,tags:[],cols:1},{name:"number_hint_0",zOrder:2,fileURL:"number_hint_0.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_1",zOrder:0,fileURL:"number_hint_1.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_2",zOrder:0,fileURL:"number_hint_2.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_3",zOrder:0,fileURL:"number_hint_3.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_4",zOrder:0,fileURL:"number_hint_4.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_5",zOrder:0,fileURL:"number_hint_5.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_6",zOrder:0,fileURL:"number_hint_6.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_7",zOrder:0,fileURL:"number_hint_7.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_8",zOrder:0,fileURL:"number_hint_8.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"number_hint_9",zOrder:0,fileURL:"number_hint_9.png",x:248,y:50,w:15,h:15,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_OVER_TOTAL_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:250,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_OVER_TOTAL_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:250,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_OVER_TOTAL_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:250,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_OVER_TOTAL_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:250,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_OVER_TOTAL_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:250,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:212,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_TIME_BONUS_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_TIME_BONUS_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_TIME_BONUS_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_TIME_BONUS_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_TIME_BONUS_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_TIME_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_TIME_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_TIME_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_TIME_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_TIME_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:262,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_HINT_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_HINT_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_HINT_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_HINT_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_TOTAL_HINT_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_HINT_1",zOrder:5,fileURL:"number_score_0.png",x:122,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_HINT_2",zOrder:5,fileURL:"number_score_0.png",x:138,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_HINT_3",zOrder:5,fileURL:"number_score_0.png",x:154,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_HINT_4",zOrder:5,fileURL:"number_score_0.png",x:170,y:310,w:19,h:21,tags:[],cols:1},{name:"NUM_STAGE_WIN_TOTAL_HINT_5",zOrder:5,fileURL:"number_score_0.png",x:186,y:310,w:19,h:21,tags:[],cols:1},{name:"number_score_1",zOrder:0,fileURL:"number_score_1.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_2",zOrder:0,fileURL:"number_score_2.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_3",zOrder:0,fileURL:"number_score_3.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_4",zOrder:0,fileURL:"number_score_4.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_5",zOrder:0,fileURL:"number_score_5.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_6",zOrder:0,fileURL:"number_score_6.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_7",zOrder:0,fileURL:"number_score_7.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_8",zOrder:0,fileURL:"number_score_8.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"number_score_9",zOrder:0,fileURL:"number_score_9.png",x:0,y:0,w:19,h:21,tags:[],cols:1},{name:"score_1",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:124,y:26,w:14,h:15,tags:[],cols:1},{name:"score_2",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:136,y:26,w:14,h:15,tags:[],cols:1},{name:"score_3",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:148,y:26,w:14,h:15,tags:[],cols:1},{name:"score_4",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:160,y:26,w:14,h:15,tags:[],cols:1},{name:"score_5",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:172,y:26,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_10",zOrder:2,fileURL:"NUM_LEVEL_1.png",x:67,y:26,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_0",zOrder:2,fileURL:"NUM_LEVEL_0.png",x:78,y:26,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_1",zOrder:0,fileURL:"NUM_LEVEL_1.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_2",zOrder:0,fileURL:"NUM_LEVEL_2.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_3",zOrder:0,fileURL:"NUM_LEVEL_3.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_4",zOrder:0,fileURL:"NUM_LEVEL_4.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_5",zOrder:0,fileURL:"NUM_LEVEL_5.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_6",zOrder:0,fileURL:"NUM_LEVEL_6.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_7",zOrder:0,fileURL:"NUM_LEVEL_7.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_8",zOrder:0,fileURL:"NUM_LEVEL_8.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"NUM_LEVEL_9",zOrder:0,fileURL:"NUM_LEVEL_9.png",x:0,y:0,w:14,h:15,tags:[],cols:1},{name:"OrientationWarning",zOrder:0,fileURL:"OrientationWarning.png",x:0,y:0,w:250,h:250,tags:[],cols:1},{name:"PAUSE_BG",zOrder:0,fileURL:"PAUSE_BG.png",x:32,y:200,w:256,h:89,tags:[],cols:1},{name:"SpilSplash",zOrder:0,fileURL:"SpilSplash.png",x:0,y:60,w:320,h:320,tags:[],cols:1},{name:"TIME_EMPTY",zOrder:2,fileURL:"TIME_EMPTY.png",x:47,y:45,w:137,h:25,tags:[],cols:1},{name:"TIME__FULL",zOrder:2,fileURL:"TIME__FULL.png",x:47,y:45,w:137,h:25,tags:[],cols:1},{name:"TXT_TOTAL_SCORE",zOrder:0,fileURL:"TXT_TOTAL_SCORE.png",x:0,y:0,w:149,h:26,tags:[],cols:1},{name:"TXT_YOUR_TOTAL_SCORE",zOrder:0,fileURL:"TXT_YOUR_TOTAL_SCORE.png",x:0,y:0,w:200,h:26,tags:[],cols:1},{name:"YOU_WIN_BG",zOrder:3,fileURL:"YOU_WIN_BG.png",x:3,y:112,w:316,h:286,tags:[],cols:1},{name:"farm_1",zOrder:0,fileURL:"farm/1.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_10",zOrder:0,fileURL:"farm/10.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_11",zOrder:0,fileURL:"farm/11.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_12",zOrder:0,fileURL:"farm/12.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_13",zOrder:0,fileURL:"farm/13.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_14",zOrder:0,fileURL:"farm/14.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_15",zOrder:0,fileURL:"farm/15.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_16",zOrder:0,fileURL:"farm/16.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_17",zOrder:0,fileURL:"farm/17.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_18",zOrder:0,fileURL:"farm/18.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_19",zOrder:0,fileURL:"farm/19.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_2",zOrder:0,fileURL:"farm/2.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_20",zOrder:0,fileURL:"farm/20.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_21",zOrder:0,fileURL:"farm/21.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_22",zOrder:0,fileURL:"farm/22.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_23",zOrder:0,fileURL:"farm/23.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_24",zOrder:0,fileURL:"farm/24.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_25",zOrder:0,fileURL:"farm/25.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_26",zOrder:0,fileURL:"farm/26.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_27",zOrder:0,fileURL:"farm/27.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_28",zOrder:0,fileURL:"farm/28.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_29",zOrder:0,fileURL:"farm/29.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_3",zOrder:0,fileURL:"farm/3.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_30",zOrder:0,fileURL:"farm/30.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_31",zOrder:0,fileURL:"farm/31.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_32",zOrder:0,fileURL:"farm/32.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_4",zOrder:0,fileURL:"farm/4.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_5",zOrder:0,fileURL:"farm/5.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_6",zOrder:0,fileURL:"farm/6.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_7",zOrder:0,fileURL:"farm/7.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_8",zOrder:0,fileURL:"farm/8.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_9",zOrder:0,fileURL:"farm/9.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_1_touch",zOrder:0,fileURL:"farm/1_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_10_touch",zOrder:0,fileURL:"farm/10_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_11_touch",zOrder:0,fileURL:"farm/11_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_12_touch",zOrder:0,fileURL:"farm/12_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_13_touch",zOrder:0,fileURL:"farm/13_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_14_touch",zOrder:0,fileURL:"farm/14_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_15_touch",zOrder:0,fileURL:"farm/15_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_16_touch",zOrder:0,fileURL:"farm/16_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_17_touch",zOrder:0,fileURL:"farm/17_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_18_touch",zOrder:0,fileURL:"farm/18_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_19_touch",zOrder:0,fileURL:"farm/19_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_2_touch",zOrder:0,fileURL:"farm/2_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_20_touch",zOrder:0,fileURL:"farm/20_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_21_touch",zOrder:0,fileURL:"farm/21_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_22_touch",zOrder:0,fileURL:"farm/22_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_23_touch",zOrder:0,fileURL:"farm/23_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_24_touch",zOrder:0,fileURL:"farm/24_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_25_touch",zOrder:0,fileURL:"farm/25_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_26_touch",zOrder:0,fileURL:"farm/26_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_27_touch",zOrder:0,fileURL:"farm/27_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_28_touch",zOrder:0,fileURL:"farm/28_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_29_touch",zOrder:0,fileURL:"farm/29_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_3_touch",zOrder:0,fileURL:"farm/3_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_30_touch",zOrder:0,fileURL:"farm/30_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_31_touch",zOrder:0,fileURL:"farm/31_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_32_touch",zOrder:0,fileURL:"farm/32_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_4_touch",zOrder:0,fileURL:"farm/4_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_5_touch",zOrder:0,fileURL:"farm/5_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_6_touch",zOrder:0,fileURL:"farm/6_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_7_touch",zOrder:0,fileURL:"farm/7_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_8_touch",zOrder:0,fileURL:"farm/8_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1},{name:"farm_9_touch",zOrder:0,fileURL:"farm/9_touch.png",x:0,y:0,w:36,h:35,tags:[],cols:1}];FZ.getImgInfo=function(a){for(var b=0,c=null,b=0;b<FZ.IphoneUI.length;b++)if(c=FZ.IphoneUI[b],a===c.name)return c;return null}})();(function(){FZ.GameDefs={STATS_FONT_SIZE:16,SCREEN_W:320,SCREEN_H:480,SCREEN_BOTTOM_H:44,SCREEN_TOP_H:20,TIME_RATE:8,HALF_ACCELERATION_OF_GRAVITY:5,FLASH_COUNT:0,FLASH_FOCUS_COUNT:1,DIAMOND_SPEED_X:6,DIAMOND_SPEED_Y:6,FALLING_SPEED_X:4,FALLING_SPEED_Y:-4,DIAMOND_RORATE_NONE:0,DIAMOND_RORATE_LEFT:1,DIAMOND_RORATE_RIGHT:2,DIAMOND_RORATE_RATE:20,GAME_STATE_UNKNOW:-1,GAME_STATE_LOADING:0,GAME_STATE_INIT:1,GAME_STATE_GAME:2,PET_FLICKER_TIME:100,PET_FLICKER_FOCUS_TIME:50,PET_TYPE_0:0,PET_TYPE_1:1,PET_TYPE_2:2,PET_TYPE_3:3,PET_TYPE_4:4,PET_TYPE_5:5,PET_TYPE_6:6,PET_TYPE_7:7,PET_TYPE_8:8,PET_TYPE_9:9,PET_TYPE_10:10,PET_TYPE_11:11,PET_TYPE_12:12,PET_TYPE_13:13,PET_TYPE_14:14,PET_TYPE_15:15,PET_TYPE_16:16,PET_TYPE_17:17,PET_TYPE_18:18,PET_TYPE_19:19,PET_TYPE_20:20,PET_TYPE_21:21,PET_TYPE_22:22,PET_TYPE_23:23,PET_TYPE_24:24,PET_TYPE_25:25,PET_TYPE_26:26,PET_TYPE_27:27,PET_TYPE_28:28,PET_TYPE_29:29,PET_TYPE_30:30,PET_TYPE_31:31,PET_TYPE_32:32,PET_TYPE_33:33,PET_TYPE_34:34,PET_TYPE_35:35,PET_TYPE_36:36,PET_TYPE_37:26,PET_TYPE_38:38,PET_TYPE_39:39,DIAMOND_TYPES:32,DREAMPET_NUM_LINE_HALF:5,DREAMPET_NUM_COL_HALF:4,DREAMPET_NUM_COL:8,DREAMPET_NUM_LINE:10,ALL_PET_NUM:80,ALL_GENERAL:120,ALL_GENERAL_HALF:60,DRAW_LINE_TIME:6,PET_FLASH_TIME:20,GRID_WIDTH:36,GRID_WIDTH_HALF:18,GRID_HEIGHT:35,GRID_HEIGHT_HALF:17,OFFSET_X:16,OFFSET_Y:84,DREAMPET_OFFSET_X:-20,DREAMPET_OFFSET_Y:49,SEARCH_NONE:0,SEARCH_INIT:1,SEARCH_ING:2,SEARCH_FINISHED:3,GAME_CLEAR_TIME:1500,DREAMPET_REMOVE:-1,DREAMPET_INIT:0,DREAMPET_FOCUS:1,DREAMPET_FLASH:2,DREAMPET_FLASH_HINT:3,DREAMPET_MOVING:4,LEVEL_HINT_NUMBER:[0,3,3,3,4,4,4,5,5,5,6],MAX_LEVEL_RANK:10,LEVEL_TIME:[0,180,180,180,180,180,180,180,180,180,180],LEVEL_PET_KIND:[5,22,23,24,25,26,27,28,29,30,31],PET_1:0,PET_2:1,PET_3:2,PET_4:3,PET_5:4,PET_6:5,PET_7:6,PET_8:7,PET_9:8,PET_10:9,PET_11:10,PET_12:11,PET_13:12,PET_14:13,PET_15:14,PET_16:15,PET_17:16,PET_18:17,PET_19:18,PET_20:19,PET_21:20,PET_22:21,PET_23:22,PET_24:23,PET_25:24,PET_26:25,PET_27:26,PET_28:27,PET_29:28,PET_30:29,PET_31:30,PET_32:31,PET_33:32,PET_34:33,PET_35:34,PET_36:35,PET_37:36,PET_38:26,PET_39:38,PET_40:39}})();(function(){FZ.GameText={TEXT_GAME_OVER:SpilGames._("game over"),TEXT_YOUR_TOTAL_SCORE:SpilGames._("Your total score"),TEXT_RETRY:SpilGames._("RETRY"),TEXT_LEVEL:SpilGames._("level"),TEXT_PAUSED:SpilGames._("STOP"),TEXT_NO_MORE_MATCHES:SpilGames._("No match"),TEXT_GAME_COMPLETE:SpilGames._("Game completion"),TEXT_TOTAL_SCORE:SpilGames._("TOTAL SCORE"),TEXT_USED_TIME:SpilGames._("usage time"),TEXT_USED_HINTS:SpilGames._("Use suggestions"),TEXT_MAIN_MENU:SpilGames._("MAIN"),TEXT_START_GAME:SpilGames._(""),TEXT_LEVEL_CLEAR:SpilGames._("Congratulations"),TEXT_SCORE:SpilGames._("SCORE"),TEXT_TIME_BONUS:SpilGames._("Time reward"),TEXT_NEXT_LEVEL:SpilGames._("NEXT")}})();(function(){var a=0,b=0,c=null,e=null,f=function(){if(null===e)e=e||[];else for(;0<e.length;)e.pop()},g=function(a,d,e,f){var g=null,p=d*b+a;if(a!==e&&d!==f)return!1;var l=g=g=0,q=0;if(a===e)for(g=d,l=e,q=f,d>f&&(g=f,q=d),p=(g+1)*b+a;p<q*b+l;p+=b){if(g=c[p],FZ.GameDefs.DREAMPET_REMOVE!==g.m_state)return!1}else if(d===f)for(g=a,l=e,q=f,a>e&&(g=e,l=a),p=d*b+g+1;p<q*b+l;p++)if(g=c[p],FZ.GameDefs.DREAMPET_REMOVE!==g.m_state)return!1;return!0},d=function(a,d,f,n){var r=0,p=0,l=!1,l=null,r=f,p=d,l=c[p*b+r];if(FZ.GameDefs.DREAMPET_REMOVE===l.m_state&&(l=g(a,d,r,p))&&(l=g(r,p,f,n)))return e.push([r,p]),!0;r=a;p=n;l=c[p*b+r];return FZ.GameDefs.DREAMPET_REMOVE===l.m_state&&(l=g(a,d,r,p))&&(l=g(r,p,f,n))?(e.push([r,p]),!0):!1};FZ.AG={};FZ.AG.SearchSpecialPath={getPath:function(h,k,m,n,r,p,l){if(void 0===h||h.length<k*m)return null;c=h;a=k;b=m;f();e.push([n,r]);if(g(n,r,p,l))return e.push([p,l]),e;f();e.push([n,r]);if(d(n,r,p,l))return e.push([p,l]),e;f();a:{var q=m=k=h=0,u=0,t=0,s=null;n<p?(h=n,k=r,u=p,t=l):(h=p,k=l,u=n,t=r);q=k;for(m=h+1;m<b;m++){s=c[q*b+m];if(FZ.GameDefs.DREAMPET_REMOVE!==s.m_state)break;f();e.push([h,k]);e.push([m,q]);if(d(m,q,u,t)){e.push([u,t]);n=!0;break a}}r<l?(h=n,k=r,u=p,t=l):(h=p,k=l,u=n,t=r);m=h;for(q=k+1;q<a;q++){s=c[q*b+m];if(FZ.GameDefs.DREAMPET_REMOVE!==s.m_state)break;f();e.push([h,k]);e.push([m,q]);if(d(m,q,u,t)){e.push([u,t]);n=!0;break a}}n<p?(h=n,k=r,u=p,t=l):(h=p,k=l,u=n,t=r);q=k;for(m=h-1;0<=m;m--){s=c[q*b+m];if(FZ.GameDefs.DREAMPET_REMOVE!==s.m_state)break;f();e.push([h,k]);e.push([m,q]);if(d(m,q,u,t)){e.push([u,t]);n=!0;break a}}r<l?(h=n,k=r,u=p,t=l):(h=p,k=l,u=n,t=r);m=h;for(q=k-1;0<=q;q--){s=c[q*b+m];if(FZ.GameDefs.DREAMPET_REMOVE!==s.m_state)break;f();e.push([h,k]);e.push([m,q]);if(d(m,q,u,t)){e.push([u,t]);n=!0;break a}}n=void 0}return n?e:null},drawNum:function(a,b,c,d,e){var f=0;if(0===b)a.setFrame(0),a.draw(FZ.GameBase.MainContext);else{a.resetMatrix();a.makeTranslate(c,d);for(var g=0;0!==b;g++)f=Math.floor(b%10),a.setFrame(f),a.draw(FZ.GameBase.MainContext),a.translate(-e,0),b=Math.floor(b/10);a.setFrame(0);a.makeTranslate(c,d)}},setNumDiv:function(a,b){var c=0,d=c=null;if(0===b)return a[0]=document.createElement("div"),a[0].style.zIndex=202,c=FZ.getImgInfo("number_hint_0"),FZ.GameBase.setCss(a[0],c),1;if(10<b)return c=Math.floor(b%10),d=document.createElement("div"),d.style.zIndex=202,c=FZ.getImgInfo("number_hint_"+c),FZ.GameBase.setCss(d,c),a.push(d),c=Math.floor(b/10),d=document.createElement("div"),d.style.zIndex=205,c=FZ.getImgInfo("number_hint_clone_"+c),FZ.GameBase.setCss(d,c),a.push(d),2;c=Math.floor(b%10);d=document.createElement("div");d.style.zIndex=202;c=FZ.getImgInfo("number_hint_"+c);FZ.GameBase.setCss(d,c);a.push(d);c=Math.floor(b/10);d=document.createElement("div");d.style.zIndex=205;c=FZ.getImgInfo("number_hint_clone_"+c);FZ.GameBase.setCss(d,c);d.style.visibility="hidden";a.push(d);return 2},setScoreNum:function(a){for(var b=0,c=[];0<a;)b=Math.floor(a%10),c.push(b),a=Math.floor(a/10);return c},getPolygonVertex:function(a,b,c,d){if(3>d)return null;for(var e=[],f=0,g=2*Math.PI/d,q=0;q<d;q++){var u=[];u.push(a+Math.floor(c*Math.sin(f)));u.push(b+Math.floor(c*Math.cos(f)));f+=g;e.push(u)}return e}}})();(function(){FZ.DivManager={m_init:!1,m_parentContainer:null,m_display_list:null,offsetLeft:0,offsetTop:0,init:function(){this.m_init||(this.m_init=!0,this.m_parentContainer=null,this.m_display_list=this.m_display_list||[])},setSize:function(a,b){null!==this.m_parentContainer&&(this.m_parentContainer.style.width=a+"px",this.m_parentContainer.style.height=b+"px")},setParent:function(a){this.m_parentContainer=a;this.m_parentContainer.style.position="absolute";this.m_parentContainer.style.overflow="hidden";this.offsetLeft=this.m_parentContainer.offsetLeft;this.offsetTop=this.m_parentContainer.offsetTop},setOffset:function(a,b){this.offsetLeft=a;this.offsetTop=b},getOffsetX:function(){return this.offsetLeft=this.m_parentContainer.offsetLeft},getOffsetY:function(){return this.offsetTop=this.m_parentContainer.offsetTop},setOverflow:function(a){this.m_parentContainer&&(this.m_parentContainer.style.overflow=a)},onmousemove:function(a){},addChild:function(a){this.m_parentContainer.appendChild(a);this.m_display_list.push(a)},removeChild:function(a){for(var b=-1,b=0;b<this.m_parentContainer.childNodes.length;b++)if(a==this.m_parentContainer.childNodes[b]){this.m_parentContainer.removeChild(a);break}a:{for(var b=this.m_display_list,c=0,c=0;c<b.length;c++)if(a===b[c]){a=c;break a}a=-1}b=a;-1!==b&&this.m_display_list.splice(b,1)},removeAllChild:function(){for(var a=null;0<this.m_display_list.length;)a=this.m_display_list.pop(),this.m_parentContainer.contains(a)&&this.m_parentContainer.removeChild(a)}}})();(function(){FZ.stateStatus={};FZ.stateStatus.INIT=0;FZ.stateStatus.NORMAL=5;FZ.stateStatus.HIDENOTIFY=15;FZ.stateStatus.HIDELOGIC=20;FZ.stateStatus.DONOTHING=30;FZ.BaseState=FZ.newClass({StateName:"GameStateBase",m_status:FZ.stateStatus.NORMAL,m_timer:null,m_main_div:null,m_main_div_clone:null,m_ui_list:null,m_btn_list:null,init:function(){FZ.GameBase.registerState(this.StateName,this);this.m_main_div=document.createElement("div");this.m_main_div_clone=document.createElement("div");this.m_ui_list=[];this.m_btn_list=[]},pause:function(){},resume:function(){},createUIs:function(a){for(var b=0,c=null,e=null,b=0;b<a.length;b++)c=FZ.getImgInfo(a[b]),e=document.createElement("div"),FZ.GameBase.setCss(e,c),this.m_ui_list.push(e),this.m_main_div.appendChild(e)},createBtns:function(a,b){for(var c=0,e=null,f=null,c=0;c<a.length;c++)e=FZ.getImgInfo(a[c][0]),f=FZ.getImgInfo(a[c][1]),window.btn=new window.FZ.UIButton(e.w,e.h,e.cols,e.fileURL,f.fileURL),btn.setPos(e.x,e.y),btn.addMonitor(this),this.m_btn_list.push(btn),b&&this.m_main_div.appendChild(btn.m_div)},resetTranslate:function(a){this.m_remove_div=!1;this.m_main_div.style.display="inline";this.m_main_div.style.zIndex=0;this.m_main_div.style.webkitTransitionDuration="0s";this.m_main_div.style.opacity=a;this.m_main_div.style.webkitTransform="translate(0px, 0px) rotate(0deg)"},fade_in:function(a,b){this.m_remove_div=!1;this.m_main_div.style.webkitTransitionDuration=a+"ms";this.m_main_div.style.opacity=b;this.m_main_div.style.webkitTransform="translate(0px, 0px) rotate(0deg)"},fade_out:function(a,b,c){var e=this,f=FZ.GameDefs.SCREEN_W;this.m_remove_div=!0;this.m_main_div.style.webkitTransitionDuration=a+"ms";setTimeout(function(){e.m_main_div.style.opacity=b;e.m_main_div.style.webkitTransform="translate("+f+"px, 00px) rotate("+c+"deg)"},1);setTimeout(function(){e.m_remove_div&&(e.m_main_div.style.display="none")},a)},preProcess:function(){},postProcess:function(){},AIUpdate:function(a){},pushState:function(a){this.__stateStack.push(this.__StateLib[a])},popState:function(){this.CurrentState=this.__stateStack.pop();void 0!==this.CurrentState&&null!==this.CurrentState&&this.CurrentState.resume&&this.CurrentState.resume.apply(this.CurrentState,arguments)}})})();(function(){FZ.Game={};FZ.Game.checkButtun=function(a){var b=a.getPosition();if(FZ.ControlManager.Mouse.x>b.x&&FZ.ControlManager.Mouse.y>b.y&&FZ.ControlManager.Mouse.x<b.x+a.__theImages[0][0].width&&FZ.ControlManager.Mouse.y<b.y+a.__theImages[0][0].height)return a.setFrame(1+(FZ.ControlManager.Mouse.leftKey?1:0)),!0;a.setFrame(0);return!1};FZ.Game.PreLoadingState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_PRELOADING,m_test_timer:0,preProcess:function(){FZ.spriteManager.addResource("LOADING_BG",0,"./linkMonsters/res/images/MAIN_MENU_AND_LOADING_BG.png",0,0,1);FZ.spriteManager.addResource("majong_BG",0,"./linkMonsters/res/images/majong_BG.png",0,0,1);FZ.spriteManager.addResource("loading_empty",0,"./linkMonsters/res/images/loading_empty.png",0,0,1);FZ.spriteManager.addResource("loading_full",0,"./linkMonsters/res/images/loading_full.png",0,0,1);FZ.spriteManager.addResource("SpilSplash",0,"./linkMonsters/res/images/SpilSplash.png",0,0,1);this.m_timer=setTimeout(FZ.Tools.bind(this,this.AIUpdate),500)},postProcess:function(){},AIUpdate:function(){FZ.PrintLog(""+this.m_test_timer);FZ.ResourceManager.isResourceLoaded()?FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_LOGO):this.m_timer=setTimeout(FZ.Tools.bind(this,this.AIUpdate),200)}},FZ.BaseState))})();FZ.Diamond=FZ.newClass({BLOCK_SPR_LIST:"farm_1 farm_2 farm_3 farm_4 farm_5 farm_6 farm_7 farm_8 farm_9 farm_10 farm_11 farm_12 farm_13 farm_14 farm_15 farm_16 farm_17 farm_18 farm_19 farm_20 farm_21 farm_22 farm_23 farm_24 farm_25 farm_26 farm_27 farm_28 farm_29 farm_30 farm_31 farm_32".split(" "),m_state:FZ.GameDefs.DREAMPET_INIT,m_search_flag:FZ.GameDefs.SEARCH_NONE,m_style:-1,m_module:-1,m_line:0,m_col:0,m_x:0,m_y:0,m_dest_x:0,m_dest_y:0,m_fall_time:0,m_fall_speed_x:0,m_fall_speed_y:0,m_fall_x:0,m_fall_y:0,m_turn:FZ.GameDefs.DIAMOND_RORATE_NONE,m_angle:0,m_spr:null,m_flashTime:0,m_worldMatrix:null,m_back_list:null,m_div:null,m_div_focus:null,m_div_hint:null,m_callback:null,m_anim_callback:null,m_flash_count:FZ.GameDefs.FLASH_COUNT,init:function(a,b,c,e){this.m_search_flag=FZ.GameDefs.SEARCH_NONE;this.m_line=a;this.m_col=b;this.m_x=this.m_col*FZ.GameDefs.GRID_WIDTH+FZ.GameDefs.DREAMPET_OFFSET_X;this.m_y=this.m_line*FZ.GameDefs.GRID_HEIGHT+FZ.GameDefs.DREAMPET_OFFSET_Y;this.m_dest_x=this.m_x;this.m_dest_y=this.m_y;this.m_fall_speed_y=this.m_fall_speed_x=this.m_fall_time=0;this.m_fall_x=this.m_x;this.m_fall_y=this.m_y;this.m_turn=FZ.GameDefs.DIAMOND_RORATE_NONE;this.m_style=Math.floor(c);this.m_state=Math.floor(e);this.m_flashTime=0;this.m_worldMatrix=new FZ.Math.Matrix3;this.m_worldMatrix.identity();switch(this.m_style){case FZ.GameDefs.PET_TYPE_0:this.m_module=FZ.GameDefs.PET_1;break;case FZ.GameDefs.PET_TYPE_1:this.m_module=FZ.GameDefs.PET_2;break;case FZ.GameDefs.PET_TYPE_2:this.m_module=FZ.GameDefs.PET_3;break;case FZ.GameDefs.PET_TYPE_3:this.m_module=FZ.GameDefs.PET_4;break;case FZ.GameDefs.PET_TYPE_4:this.m_module=FZ.GameDefs.PET_5;break;case FZ.GameDefs.PET_TYPE_5:this.m_module=FZ.GameDefs.PET_6;break;case FZ.GameDefs.PET_TYPE_6:this.m_module=FZ.GameDefs.PET_7;break;case FZ.GameDefs.PET_TYPE_7:this.m_module=FZ.GameDefs.PET_8;break;case FZ.GameDefs.PET_TYPE_8:this.m_module=FZ.GameDefs.PET_9;break;case FZ.GameDefs.PET_TYPE_9:this.m_module=FZ.GameDefs.PET_10;break;case FZ.GameDefs.PET_TYPE_10:this.m_module=FZ.GameDefs.PET_11;break;case FZ.GameDefs.PET_TYPE_11:this.m_module=FZ.GameDefs.PET_12;break;case FZ.GameDefs.PET_TYPE_12:this.m_module=FZ.GameDefs.PET_13;break;case FZ.GameDefs.PET_TYPE_13:this.m_module=FZ.GameDefs.PET_14;break;case FZ.GameDefs.PET_TYPE_14:this.m_module=FZ.GameDefs.PET_15;break;case FZ.GameDefs.PET_TYPE_15:this.m_module=FZ.GameDefs.PET_16;break;case FZ.GameDefs.PET_TYPE_16:this.m_module=FZ.GameDefs.PET_17;break;case FZ.GameDefs.PET_TYPE_17:this.m_module=FZ.GameDefs.PET_18;break;case FZ.GameDefs.PET_TYPE_18:this.m_module=FZ.GameDefs.PET_19;break;case FZ.GameDefs.PET_TYPE_19:this.m_module=FZ.GameDefs.PET_20;break;case FZ.GameDefs.PET_TYPE_20:this.m_module=FZ.GameDefs.PET_21;break;case FZ.GameDefs.PET_TYPE_21:this.m_module=FZ.GameDefs.PET_22;break;case FZ.GameDefs.PET_TYPE_22:this.m_module=FZ.GameDefs.PET_23;break;case FZ.GameDefs.PET_TYPE_23:this.m_module=FZ.GameDefs.PET_24;break;case FZ.GameDefs.PET_TYPE_24:this.m_module=FZ.GameDefs.PET_25;break;case FZ.GameDefs.PET_TYPE_25:this.m_module=FZ.GameDefs.PET_26;break;case FZ.GameDefs.PET_TYPE_26:this.m_module=FZ.GameDefs.PET_27;break;case FZ.GameDefs.PET_TYPE_27:this.m_module=FZ.GameDefs.PET_28;break;case FZ.GameDefs.PET_TYPE_28:this.m_module=FZ.GameDefs.PET_29;break;case FZ.GameDefs.PET_TYPE_29:this.m_module=FZ.GameDefs.PET_30;break;case FZ.GameDefs.PET_TYPE_30:this.m_module=FZ.GameDefs.PET_31;break;case FZ.GameDefs.PET_TYPE_31:this.m_module=FZ.GameDefs.PET_32;break;case FZ.GameDefs.PET_TYPE_32:this.m_module=FZ.GameDefs.PET_33;break;case FZ.GameDefs.PET_TYPE_33:this.m_module=FZ.GameDefs.PET_34;break;case FZ.GameDefs.PET_TYPE_34:this.m_module=FZ.GameDefs.PET_35;break;case FZ.GameDefs.PET_TYPE_35:this.m_module=FZ.GameDefs.PET_36;break;case FZ.GameDefs.PET_TYPE_36:this.m_module=FZ.GameDefs.PET_37;break;case FZ.GameDefs.PET_TYPE_37:this.m_module=FZ.GameDefs.PET_38;break;case FZ.GameDefs.PET_TYPE_38:this.m_module=FZ.GameDefs.PET_39;break;case FZ.GameDefs.PET_TYPE_39:this.m_module=FZ.GameDefs.PET_40;break;default:this.m_module=FZ.GameDefs.PET_1}a=a=null;this.m_back_list=[];a=FZ.getImgInfo(this.BLOCK_SPR_LIST[this.m_module]);a="url(./linkMonsters/res/images/"+a.fileURL+")";this.m_back_list.push(a);this.m_callback=null;FZ.GameDefs.DREAMPET_REMOVE===e?(this.m_div=document.createElement("div"),this.m_div_focus=document.createElement("div"),this.m_div_hint=document.createElement("div")):(this.setCss(),e=this.m_module+1,this.m_div_focus=document.createElement("div"),this.m_div_focus.style.width=FZ.GameDefs.GRID_WIDTH+"px",this.m_div_focus.style.height=FZ.GameDefs.GRID_HEIGHT+"px",this.m_div_focus.style.position="absolute",this.m_div_focus.style.backgroundRepeat="no-repeat",this.m_div_focus.style.backgroundImage="url(./linkMonsters/res/images/farm/"+e+"_touch.png)",this.hidden(),this.m_div_focus.style.webkitTransition="opacity, translate",this.m_div.appendChild(this.m_div_focus),this.m_div_hint=document.createElement("div"),this.m_div_hint.style.width=FZ.GameDefs.GRID_WIDTH+"px",this.m_div_hint.style.height=FZ.GameDefs.GRID_HEIGHT+"px",this.m_div_hint.style.position="absolute",this.m_div_hint.style.backgroundRepeat="no-repeat",this.m_div_hint.style.backgroundImage="url(./linkMonsters/res/images/farm/"+e+"_touch.png)",this.hiddenHint(),this.m_div_hint.style.webkitTransition="opacity, translate",this.m_div.appendChild(this.m_div_hint),this.setPetFocus())},setCss:function(){this.m_div=document.createElement("div");this.m_div.style.width=FZ.GameDefs.GRID_WIDTH+2+"px";this.m_div.style.height=FZ.GameDefs.GRID_HEIGHT+2+"px";this.m_div.style.position="absolute";this.m_div.style.webkitTransition="opacity, left, top, translate";this.m_div.style.webkitTransition="opacity, translate";this.m_div.style.backgroundRepeat="no-repeat";this.m_div.style.left=this.m_x+"px";this.m_div.style.top=this.m_y+"px"},fade_in:function(){this.m_div.style.webkitTransitionDuration=FZ.GameDefs.PET_FLICKER_TIME+"ms";this.m_div.style.opacity=1;this.m_timer=setTimeout(FZ.Tools.bind(this,this.fade_out),FZ.GameDefs.PET_FLICKER_TIME)},flash:function(){0<this.m_flash_count&&(this.m_div_focus.style.webkitTransitionDuration=FZ.GameDefs.PET_FLICKER_FOCUS_TIME+"ms",this.m_div_focus.style.opacity=0,this.m_flash_count--,this.m_timer=setTimeout(FZ.Tools.bind(this,this.flash_again),FZ.GameDefs.PET_FLICKER_FOCUS_TIME))},flash_again:function(){this.m_div_focus.style.webkitTransitionDuration=FZ.GameDefs.PET_FLICKER_FOCUS_TIME+"ms";this.m_div_focus.style.opacity=1;this.m_timer=setTimeout(FZ.Tools.bind(this,this.flash),FZ.GameDefs.PET_FLICKER_FOCUS_TIME)},fade_out:function(){0<this.m_flash_count?(this.m_div.style.webkitTransitionDuration=FZ.GameDefs.PET_FLICKER_TIME+"ms",this.m_div.style.opacity=0,this.m_flash_count--,this.m_timer=setTimeout(FZ.Tools.bind(this,this.fade_in),FZ.GameDefs.PET_FLICKER_TIME)):FZ.GameDefs.DREAMPET_FLASH_HINT===this.m_state&&(this.setState(FZ.GameDefs.DREAMPET_INIT),this.hiddenHint())},fadeOut:function(){this.m_div.style.webkitTransitionDuration="500ms";this.m_div.style.opacity=0;this.m_timer=setTimeout(FZ.Tools.bind(this,this.fadeEnd),500)},fadeEnd:function(){this.setState(FZ.GameDefs.DREAMPET_REMOVE);this.m_div.style.visibility="hidden"},setPetFocus:function(){FZ.GameDefs.DREAMPET_FLASH===this.m_state?(this.m_div.style.backgroundImage=this.m_back_list[0],this.m_div.style.opacity=1,this.fadeOut()):FZ.GameDefs.DREAMPET_FLASH_HINT===this.m_state?(this.m_div.style.backgroundImage=this.m_back_list[0],this.showHint(),this.m_timer=setTimeout(FZ.Tools.bind(this,function(){FZ.GameDefs.DREAMPET_FLASH_HINT===this.m_state?(this.setState(FZ.GameDefs.DREAMPET_INIT),this.hiddenHint()):this.m_state===FZ.GameDefs.DREAMPET_FOCUS&&this.hiddenHint()}),1500)):this.m_state===FZ.GameDefs.DREAMPET_INIT?this.m_div.style.backgroundImage=this.m_back_list[0]:this.m_state===FZ.GameDefs.DREAMPET_FOCUS?(this.m_div.style.backgroundImage=this.m_back_list[0],this.m_div_focus.style.visibility="visible",this.m_div_focus.style.webkitTransitionDuration=FZ.GameDefs.PET_FLICKER_FOCUS_TIME+"ms",this.m_div_focus.style.opacity=1,this.m_flash_count=FZ.GameDefs.FLASH_FOCUS_COUNT):this.m_state===FZ.GameDefs.DREAMPET_REMOVE&&(this.m_div.style.visibility="hidden")},show:function(){this.m_div_focus.style.visibility="visible"},hidden:function(){this.m_div_focus.style.visibility="hidden"},showHint:function(){this.m_div_hint.style.visibility="visible"},hiddenHint:function(){this.m_div_hint.style.visibility="hidden"},destroy:function(){this.m_div&&this.m_div.parentNode&&this.m_div.parentNode.removeChild(this.m_div)},getLine:function(){return this.m_line},getCol:function(){return this.m_col},setLine:function(a){this.m_line=a},setCol:function(a){this.m_col=a},getStyle:function(){return this.m_style},getState:function(){return this.m_state},setStyle:function(a){this.m_style=a},setState:function(a){this.m_state=a},getSearchFlag:function(){return this.m_search_flag},setSearchFlag:function(a){this.m_search_flag=a},updatePos:function(){!this.m_div||(this.m_x=FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_col,this.m_y=FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_line,this.m_div.style.backgroundImage=this.m_back_list[0],this.m_div.style.left=this.m_x+"px",this.m_div.style.top=this.m_y+"px")}});FZ.GRID_COOR=FZ.newClass({line:0,col:0,init:function(){this.col=this.line=0}});FZ.DiamondManager=FZ.newClass({EVT_MOUSE_OVER:"mouseover",EVT_MOUSE_MOVE:"mousemove",EVT_MOUSE_OUT:"mouseout",EVT_MOUSE_CLICK:"click",m_hintX:0,m_hintY:0,m_hintScore:null,m_last_selected:-1,m_dialog:!1,m_leftNum:-1,m_allPets:null,m_missDiamonds:null,m_hintCount:0,m_bonus_time:0,m_firstPet:null,m_secondPet:null,m_PetFirstIndex:0,m_PetSecondIndex:0,m_drawLineTime:0,m_left_pet:0,m_ctx:null,m_level:0,m_displayPetsIndex:null,m_reset_finished:!0,m_parent:null,m_observer:null,m_stop_bubble:!1,m_call_mOver:null,m_call_mOut:null,m_call_mMove:null,m_call_mClick:null,m_call_tStart:null,m_call_tMove:null,m_call_tEnd:null,m_div_line:[],isDebug:!1,m_debug_div:null,init:function(){this.m_hintY=this.m_hintX=0;this.m_hintScore="";this.m_last_selected=-1;this.m_dialog=!1;this.m_leftNum=-1;this.m_allPets=this.m_allPets||[];this.m_missDiamonds=this.m_missDiamonds||[];this.m_hintCount=0;this.m_secondPet=this.m_firstPet=null;this.m_drawLineTime=this.m_PetSecondIndex=this.m_PetFirstIndex=0;this.m_left_pet=FZ.GameDefs.ALL_PET_NUM;for(var a=0;3>a;++a)this.m_div_line[a]=document.createElement("div"),this.m_div_line[a].style.position="absolute",this.m_div_line[a].style.backgroundRepeat="no-repeat",this.m_div_line[a].style.backgroundColor="#ffff00",this.m_div_line[a].style.visibility="hidden",FZ.DivManager.addChild(this.m_div_line[a]);this.isDebug&&(this.m_debug_div=document.createElement("div"),this.m_debug_div.style.zIndex=500,this.m_debug_div.style.width="320px",this.m_debug_div.style.height="40px",this.m_debug_div.style.left="0px",this.m_debug_div.style.top="438px",this.m_debug_div.style.position="absolute",this.m_debug_div.style.color="#ff0",this.m_debug_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px",this.m_debug_div.style.fontFamily="Arial",this.m_debug_div.style.lineHeight="40px",this.m_debug_div.style.textAlign="center",this.m_debug_div.style.innerHTML="",FZ.DivManager.addChild(this.m_debug_div))},removeEvent:function(){!this.m_parent||(FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_START,this.m_call_tStart),this.m_call_tStart=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_MOVE,this.m_call_tMove),this.m_call_tMove=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_END,this.m_call_tEnd),this.m_call_tEnd=null):(FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_OVER,this.m_call_mOver),this.m_call_mOver=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_OUT,this.m_call_mOut),this.m_call_mOut=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_MOVE,this.m_call_mMove),this.m_call_mMove=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_CLICK,this.m_call_mClick),this.m_call_mClick=null))},setParent:function(a){a?(this.m_parent=a,FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.T_START,this.mouseHandler),FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.T_MOVE,this.mouseHandler),FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.T_END,this.mouseHandler)):(FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.M_OVER,this.mouseHandler),FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.M_MOVE,this.mouseHandler),FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.M_OUT,this.mouseHandler),FZ.EventHandler(this,this.m_parent,FZ.EVENT_DEF.M_CLICK,this.mouseHandler))):this.m_parent&&(FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_START,this.m_call_tStart),this.m_call_tStart=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_MOVE,this.m_call_tMove),this.m_call_tMove=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.T_END,this.m_call_tEnd),this.m_call_tEnd=null):(FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_OVER,this.m_call_mOver),this.m_call_mOver=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_OUT,this.m_call_mOut),this.m_call_mOut=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_MOVE,this.m_call_mMove),this.m_call_mMove=null,FZ.EventRemove(this,this.m_parent,FZ.EVENT_DEF.M_CLICK,this.m_call_mClick),this.m_call_mClick=null))},setBubble:function(a){this.m_stop_bubble=a},setObserver:function(a){this.m_observer=a},setCtx:function(a){this.m_ctx=a},setASprite:function(a){this.m_spr=a},clearAllPets:function(){for(var a=null;0<this.m_allPets.length;)(a=this.m_allPets.pop())&&a.destroy()},getTouchPetIndex:function(a,b){var c=0;if(a<FZ.GameDefs.DREAMPET_OFFSET_X||a>FZ.GameDefs.DREAMPET_OFFSET_X+(FZ.GameDefs.DREAMPET_NUM_COL+1)*FZ.GameDefs.GRID_WIDTH||b<FZ.GameDefs.DREAMPET_OFFSET_Y||b>FZ.GameDefs.DREAMPET_OFFSET_Y+(FZ.GameDefs.DREAMPET_NUM_LINE+1)*FZ.GameDefs.GRID_HEIGHT)return-1;c=(b-FZ.GameDefs.DREAMPET_OFFSET_Y)/FZ.GameDefs.GRID_HEIGHT*(FZ.GameDefs.DREAMPET_NUM_COL+2)+(a-FZ.GameDefs.DREAMPET_OFFSET_X)/FZ.GameDefs.GRID_WIDTH;c>=(FZ.GameDefs.DREAMPET_NUM_LINE+2)*(FZ.GameDefs.DREAMPET_NUM_COL+2)&&(c=-1);return c},checkFocus:function(){for(var a=0,a=0;a<FZ.GameDefs.ALL_GENERAL;a++)if(this.m_allPets[a].getState()===FZ.GameDefs.DREAMPET_FOCUS)return!0;return!1},searchHint:function(){for(var a=new FZ.GRID_COOR,b=new FZ.GRID_COOR,c=Math.floor(FZ.Math.random(0,FZ.GameDefs.ALL_GENERAL-1)),e=c;e<FZ.GameDefs.ALL_GENERAL;e++)if(this.m_allPets[e].getState()!==FZ.GameDefs.DREAMPET_REMOVE){a.col=this.m_allPets[e].getCol();a.line=this.m_allPets[e].getLine();for(var f=e+1;f<FZ.GameDefs.ALL_GENERAL;f++)if(this.m_allPets[f].getState()!==FZ.GameDefs.DREAMPET_REMOVE&&this.m_allPets[e].getStyle()===this.m_allPets[f].getStyle()&&(b.col=this.m_allPets[f].getCol(),b.line=this.m_allPets[f].getLine(),null!==FZ.AG.SearchSpecialPath.getPath(this.m_allPets,FZ.GameDefs.DREAMPET_NUM_LINE+2,FZ.GameDefs.DREAMPET_NUM_COL+2,a.col,a.line,b.col,b.line)))return this.m_allPets[e].setState(FZ.GameDefs.DREAMPET_FLASH_HINT),this.m_allPets[e].setPetFocus(),this.m_allPets[f].setState(FZ.GameDefs.DREAMPET_FLASH_HINT),this.m_allPets[f].setPetFocus(),this.m_hintCount--,!0}for(e=0;e<c;e++)if(this.m_allPets[e].getState()!==FZ.GameDefs.DREAMPET_REMOVE)for(a.col=this.m_allPets[e].getCol(),a.line=this.m_allPets[e].getLine(),f=e+1;f<FZ.GameDefs.ALL_GENERAL;f++)if(this.m_allPets[f].getState()!==FZ.GameDefs.DREAMPET_REMOVE&&this.m_allPets[e].getStyle()===this.m_allPets[f].getStyle()&&(b.col=this.m_allPets[f].getCol(),b.line=this.m_allPets[f].getLine(),null!==FZ.AG.SearchSpecialPath.getPath(this.m_allPets,FZ.GameDefs.DREAMPET_NUM_LINE+2,FZ.GameDefs.DREAMPET_NUM_COL+2,a.col,a.line,b.col,b.line)))return this.m_allPets[e].setState(FZ.GameDefs.DREAMPET_FLASH_HINT),this.m_allPets[e].setPetFocus(),this.m_allPets[f].setState(FZ.GameDefs.DREAMPET_FLASH_HINT),this.m_allPets[f].setPetFocus(),this.m_hintCount--,!0;return!1},searchHasMatch:function(){for(var a=new FZ.GRID_COOR,b=new FZ.GRID_COOR,c=this.m_PointPath,e=0;e<FZ.GameDefs.ALL_GENERAL;e++)if(this.m_allPets[e].getState()!==FZ.GameDefs.DREAMPET_REMOVE&&(a.col=this.m_allPets[e].getCol(),!(0>a.col||(a.line=this.m_allPets[e].getLine(),0>a.line))))for(var f=e+1;f<FZ.GameDefs.ALL_GENERAL;f++)if(this.m_allPets[f].getState()!==FZ.GameDefs.DREAMPET_REMOVE&&this.m_allPets[e].getStyle()===this.m_allPets[f].getStyle()&&(b.col=this.m_allPets[f].getCol(),!(0>b.col||(b.line=this.m_allPets[f].getLine(),0>b.line||null===FZ.AG.SearchSpecialPath.getPath(this.m_allPets,FZ.GameDefs.DREAMPET_NUM_LINE+2,FZ.GameDefs.DREAMPET_NUM_COL+2,a.col,a.line,b.col,b.line)))))return this.m_PointPath=c,!0;this.isDebug&&(this.m_debug_div.style.backgroundColor="#000");this.m_PointPath=c;return!1},ResetPosition:function(){var a,b,c=null;this.getDisplayPet();var c=this.m_displayPetsIndex,e=c.length,f=0;if(4===e)this.exchagePet(c[0],c[1]);else{for(var f=Math.floor(FZ.Math.random(1,e-2)),g=0;g<f-1;g++)a=c[g],b=c[g+1],this.exchagePet(a,b);for(g=f;g<e-2;g++)a=c[g],b=c[g+1],this.exchagePet(a,b)}},ResetTwoPosition:function(){var a,b,c=null;this.getDisplayPet();var c=this.m_displayPetsIndex,e=c.length;a=c[0];for(var f=1;f<e-1;f++)if(b=c[f],this.m_allPets[a].getStyle()===this.m_allPets[b].getStyle()){this.exchagePet(c[1],b);break}},resetPetPosEffect:function(){if(0<this.m_PetFirstIndex){switch(FZ.GameBase.SaveObject.m_cur_level){case 3:this.updownReset(this.m_PetFirstIndex,this.m_PetSecondIndex);break;case 5:this.leftrightReset(this.m_PetFirstIndex,this.m_PetSecondIndex);break;case 7:this.downReset(this.m_PetFirstIndex,this.m_PetSecondIndex);break;case 8:this.rightReset(this.m_PetFirstIndex,this.m_PetSecondIndex);break;case 9:this.leftReset(this.m_PetFirstIndex,this.m_PetSecondIndex);break;case 10:this.upReset(this.m_PetFirstIndex,this.m_PetSecondIndex)}this.m_PetFirstIndex=0}},getDisplayPet:function(){var a=0;this.m_displayPetsIndex=[];for(var b=0;b<FZ.GameDefs.ALL_GENERAL;b++)this.m_allPets[b].getState()!==FZ.GameDefs.DREAMPET_REMOVE&&(a++,this.m_displayPetsIndex.push(b));return a},isGreat:function(a,b){return a>=b?!0:!1},setPetDisappear:function(a,b){var c=0,e=[];if(a<FZ.GameDefs.DREAMPET_OFFSET_X||a>FZ.GameDefs.DREAMPET_OFFSET_X+(FZ.GameDefs.DREAMPET_NUM_COL+1)*FZ.GameDefs.GRID_WIDTH||b<FZ.GameDefs.DREAMPET_OFFSET_Y||b>FZ.GameDefs.DREAMPET_OFFSET_Y+(FZ.GameDefs.DREAMPET_NUM_LINE+1)*FZ.GameDefs.GRID_HEIGHT)return!1;c=Math.floor((b-FZ.GameDefs.DREAMPET_OFFSET_Y)/FZ.GameDefs.GRID_HEIGHT)*(FZ.GameDefs.DREAMPET_NUM_COL+2)+Math.floor((a-FZ.GameDefs.DREAMPET_OFFSET_X)/FZ.GameDefs.GRID_WIDTH);c>=(FZ.GameDefs.DREAMPET_NUM_LINE+2)*(FZ.GameDefs.DREAMPET_NUM_COL+2)&&(c=-1);if(0>c)return!1;e=this.m_allPets[c];if(null===e||void 0===e||e.getState()===FZ.GameDefs.DREAMPET_FOCUS||e.getState()===FZ.GameDefs.DREAMPET_REMOVE)return!1;if(!1===this.checkFocus())return this.m_allPets[c].setState(FZ.GameDefs.DREAMPET_FOCUS),this.m_allPets[c].show(),this.m_firstPet=this.m_allPets[c],!1;this.m_secondPet=e;window.p1=new FZ.GRID_COOR;p1.line=this.m_firstPet.getLine();p1.col=this.m_firstPet.getCol();window.p2=new FZ.GRID_COOR;p2.line=this.m_secondPet.getLine();p2.col=this.m_secondPet.getCol();if(this.m_firstPet.getStyle()!==this.m_secondPet.getStyle())return this.m_allPets[c].setState(FZ.GameDefs.DREAMPET_FOCUS),this.m_allPets[c].show(),this.m_firstPet.setState(FZ.GameDefs.DREAMPET_INIT),this.m_firstPet.hidden(),this.m_firstPet=this.m_secondPet,!1;if(null!==(e=FZ.AG.SearchSpecialPath.getPath(this.m_allPets,FZ.GameDefs.DREAMPET_NUM_LINE+2,FZ.GameDefs.DREAMPET_NUM_COL+2,p1.col,p1.line,p2.col,p2.line))){this.m_PointPath=e;this.m_allPets[(FZ.GameDefs.DREAMPET_NUM_COL+2)*p1.line+p1.col].setState(FZ.GameDefs.DREAMPET_FLASH);this.m_allPets[(FZ.GameDefs.DREAMPET_NUM_COL+2)*p2.line+p2.col].setState(FZ.GameDefs.DREAMPET_FLASH);this.m_PetFirstIndex=(FZ.GameDefs.DREAMPET_NUM_COL+2)*p1.line+p1.col;this.m_allPets[this.m_PetFirstIndex].hidden();this.m_PetSecondIndex=(FZ.GameDefs.DREAMPET_NUM_COL+2)*p2.line+p2.col;this.m_allPets[this.m_PetFirstIndex].setPetFocus();this.m_allPets[this.m_PetSecondIndex].setPetFocus();this.m_score+=100;this.m_bonus_time+=5;for(var f=this.m_PointPath.length,c=[],e=0;e<f-1;++e){c[1]=this.m_PointPath[e+1][1];c[0]=this.m_PointPath[e+1][0];var g,d,h=this.ABS(FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*c[0]+FZ.GameDefs.GRID_WIDTH_HALF,FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[e][0]+FZ.GameDefs.GRID_WIDTH_HALF),k=this.ABS(FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*c[1]+FZ.GameDefs.GRID_HEIGHT_HALF,FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[e][1]+FZ.GameDefs.GRID_HEIGHT_HALF),m,n;0===Math.floor(h)&&(h=3);0===Math.floor(k)&&(k=3);3===h&&(g=this.isGreat(FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*c[1]+FZ.GameDefs.GRID_HEIGHT_HALF,FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[e][1]+FZ.GameDefs.GRID_HEIGHT_HALF),g?(m=FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[e][0]+FZ.GameDefs.GRID_WIDTH_HALF,n=FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[e][1]+FZ.GameDefs.GRID_HEIGHT_HALF):(m=FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[e][0]+FZ.GameDefs.GRID_WIDTH_HALF,n=FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*c[1]+FZ.GameDefs.GRID_HEIGHT_HALF,k+=3));3===k&&(d=this.isGreat(FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*c[0]+FZ.GameDefs.GRID_WIDTH_HALF,FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[e][0]+FZ.GameDefs.GRID_WIDTH_HALF),d?(m=FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[e][0]+FZ.GameDefs.GRID_WIDTH_HALF,n=FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[e][1]+FZ.GameDefs.GRID_HEIGHT_HALF):(m=FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*c[0]+FZ.GameDefs.GRID_WIDTH_HALF,n=FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[e][1]+FZ.GameDefs.GRID_HEIGHT_HALF,h+=3));m<FZ.GameDefs.OFFSET_X?(this.m_div_line[e].style.left="5px",3<h&&(h-=24)):m+h>FZ.GameDefs.SCREEN_W&&3<h?(h=315-m,this.m_div_line[e].style.left=m+"px"):m>FZ.GameDefs.SCREEN_W?this.m_div_line[e].style.left="312px":this.m_div_line[e].style.left=m+"px";n<FZ.GameDefs.OFFSET_Y?this.m_div_line[e].style.top="70px":n+k>FZ.GameDefs.SCREEN_H-FZ.GameDefs.SCREEN_BOTTOM_H&&3<k?(k=FZ.GameDefs.SCREEN_H-FZ.GameDefs.SCREEN_BOTTOM_H-5-n,this.m_div_line[e].style.top=n+"px"):n>FZ.GameDefs.SCREEN_H-FZ.GameDefs.SCREEN_BOTTOM_H?(this.m_div_line[e].style.top=FZ.GameDefs.SCREEN_H-FZ.GameDefs.SCREEN_BOTTOM_H-5+"px",!0===d&&(h+=3)):this.m_div_line[e].style.top=n+"px";this.m_div_line[e].style.width=h+"px";this.m_div_line[e].style.height=k+"px";this.m_div_line[e].style.zIndex=100;this.m_div_line[e].style.visibility="visible"}var r=this;r.m_reset_finished=!1;setTimeout(function(){for(var a=0;a<f-1;++a)r.m_div_line[a].style.visibility="hidden"},400);setTimeout(function(){r.resetPetPosEffect();0!==r.getLeftPet()&&!1===r.searchHasMatch()&&(FZ.Game.GameState.m_isNoMatch=!0,FZ.Game.GameState.levelCurrentTime=(new Date).getTime());r.m_reset_finished=!0},600);this.m_left_pet-=2;return!0}this.m_allPets[c].setState(FZ.GameDefs.DREAMPET_FOCUS);this.m_firstPet&&(this.m_firstPet.setState(FZ.GameDefs.DREAMPET_INIT),this.m_firstPet.hidden(),this.m_secondPet&&(this.m_secondPet.setState(FZ.GameDefs.DREAMPET_FOCUS),this.m_secondPet.show(),this.m_firstPet=this.m_secondPet));return!1},ABS:function(a,b){return a>b?a-b:b-a},updownReset:function(a,b){var c=0,e=0;a>b?(c=a,e=b):(c=b,e=a);if(e>(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2)){for(var f=e;f>(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+2)*(FZ.GameDefs.DREAMPET_NUM_COL+2);f-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f-(FZ.GameDefs.DREAMPET_NUM_COL+2));for(f=c;f>(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+2)*(FZ.GameDefs.DREAMPET_NUM_COL+2);f-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f-(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(c>(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2)&&e<(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2)){for(f=e;f<FZ.GameDefs.DREAMPET_NUM_LINE_HALF*(FZ.GameDefs.DREAMPET_NUM_COL+2);f+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(f=c;f>(FZ.GameDefs.DREAMPET_NUM_LINE_HALF+2)*(FZ.GameDefs.DREAMPET_NUM_COL+2);f-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f-(FZ.GameDefs.DREAMPET_NUM_COL+2))}else{for(f=c;f<FZ.GameDefs.DREAMPET_NUM_LINE_HALF*(FZ.GameDefs.DREAMPET_NUM_COL+2);f+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(f=e;f<FZ.GameDefs.DREAMPET_NUM_LINE_HALF*(FZ.GameDefs.DREAMPET_NUM_COL+2);f+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(f,f+(FZ.GameDefs.DREAMPET_NUM_COL+2))}},leftrightReset:function(a,b){var c=0,e=0;a>b?(c=a,e=b):(c=b,e=a);var f=this.m_allPets[c].getLine(),c=this.m_allPets[c].getCol(),g=this.m_allPets[e].getLine(),e=this.m_allPets[e].getCol();if(c<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&e<=FZ.GameDefs.DREAMPET_NUM_COL_HALF){for(var d=c;d<FZ.GameDefs.DREAMPET_NUM_COL_HALF;d++)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d+1);for(d=e;d<FZ.GameDefs.DREAMPET_NUM_COL_HALF;d++)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d+1)}else if(e>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&c>FZ.GameDefs.DREAMPET_NUM_COL_HALF){for(d=e;d>FZ.GameDefs.DREAMPET_NUM_COL_HALF+1;d--)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d-1);for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL_HALF+1;d--)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d-1)}else if(e<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&c>FZ.GameDefs.DREAMPET_NUM_COL_HALF){for(d=e;d<FZ.GameDefs.DREAMPET_NUM_COL_HALF;d++)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d+1);for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL_HALF+1;d--)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d-1)}else{for(d=e;d>FZ.GameDefs.DREAMPET_NUM_COL_HALF+1;d--)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d-1);for(d=c;d<FZ.GameDefs.DREAMPET_NUM_COL_HALF;d++)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+d+1)}},leftReset:function(a,b){var c=0,e=0;b>a?(c=a,e=b):(c=b,e=a);for(var f=this.m_allPets[c].getLine(),c=this.m_allPets[c].getCol(),g=this.m_allPets[e].getLine(),e=this.m_allPets[e].getCol();e<FZ.GameDefs.DREAMPET_NUM_COL;e++)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e+1);for(e=c;e<FZ.GameDefs.DREAMPET_NUM_COL;e++)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e+1)},rightReset:function(a,b){var c=0,e=0;a>b?(c=a,e=b):(c=b,e=a);for(var f=this.m_allPets[c].getLine(),c=this.m_allPets[c].getCol(),g=this.m_allPets[e].getLine(),e=this.m_allPets[e].getCol();0<e&&1!==e;e--)this.exchagePet(g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e,g*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e-1);for(e=c;0<e&&1!==e;e--)this.exchagePet(f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e,f*(FZ.GameDefs.DREAMPET_NUM_COL+2)+e-1)},downReset:function(a,b){var c=0,e=0,f=0;a>b?(e=a,f=b):(e=b,f=a);if(!(e-(FZ.GameDefs.DREAMPET_NUM_COL+2)<FZ.GameDefs.DREAMPET_NUM_COL+2))if(f-(FZ.GameDefs.DREAMPET_NUM_COL+2)>FZ.GameDefs.DREAMPET_NUM_COL+2&&0==(f-e)%(FZ.GameDefs.DREAMPET_NUM_COL+2)){for(var g=f-(FZ.GameDefs.DREAMPET_NUM_COL+2);g>FZ.GameDefs.DREAMPET_NUM_COL+2;g-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(g+(FZ.GameDefs.DREAMPET_NUM_COL+2),g),c=g;for(g=e-(FZ.GameDefs.DREAMPET_NUM_COL+2);g>=c;g-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(g+(FZ.GameDefs.DREAMPET_NUM_COL+2),g)}else{for(g=e-(FZ.GameDefs.DREAMPET_NUM_COL+2);g>FZ.GameDefs.DREAMPET_NUM_COL+2;g-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(g+(FZ.GameDefs.DREAMPET_NUM_COL+2),g);for(g=f-(FZ.GameDefs.DREAMPET_NUM_COL+2);g>FZ.GameDefs.DREAMPET_NUM_COL+2;g-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(g+(FZ.GameDefs.DREAMPET_NUM_COL+2),g)}},upReset:function(a,b){var c,e;a>b?(c=a,e=b):(c=b,e=a);if(!(FZ.GameDefs.ALL_GENERAL-e-(FZ.GameDefs.DREAMPET_NUM_COL+2)<FZ.GameDefs.DREAMPET_NUM_COL+2)){for(;c+(FZ.GameDefs.DREAMPET_NUM_COL+2)<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);c+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(c,c+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(c=e;c+(FZ.GameDefs.DREAMPET_NUM_COL+2)<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);c+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(c+(FZ.GameDefs.DREAMPET_NUM_COL+2),c)}},centerReset:function(a,b){var c=0,e,f;b>a?(e=a,f=b):(e=b,f=a);var g=this.m_allPets[e].getLine(),d=this.m_allPets[e].getCol(),h=this.m_allPets[f].getLine(),k=this.m_allPets[f].getCol();if(d<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){if(k<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&0===Math.floor((f-e)%(FZ.GameDefs.DREAMPET_NUM_COL+2))){for(d=c=f;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(d=c=e;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));return}if(k<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&0===Math.floor((f-e)%(FZ.GameDefs.DREAMPET_NUM_COL+2))){for(d=c=f;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(d=c=e;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));return}}if(d>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&k>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&f-e<FZ.GameDefs.DREAMPET_NUM_COL_HALF){for(d=c=f;d<(h+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2&&(this.m_allPets[d].getState()!==FZ.GameDefs.DREAMPET_REMOVE||this.m_allPets[d-(FZ.GameDefs.DREAMPET_NUM_COL+2)].getState()!==FZ.GameDefs.DREAMPET_REMOVE);d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2));for(d=c=e;d<(g+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2&&(this.m_allPets[d].getState()!==FZ.GameDefs.DREAMPET_REMOVE||this.m_allPets[d-(FZ.GameDefs.DREAMPET_NUM_COL+2)].getState()!==FZ.GameDefs.DREAMPET_REMOVE);d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2))}else{if(d>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){if(k>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&(0===Math.floor((f-e)%(FZ.GameDefs.DREAMPET_NUM_COL+2))||f-e<FZ.GameDefs.DREAMPET_NUM_COL_HALF)){for(d=c=f;d<(h+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(d=c=e;d<(g+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));return}if(k>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF&&0!==Math.floor((f-e)%(FZ.GameDefs.DREAMPET_NUM_COL+2))){for(d=c=e;d<(g+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));for(d=c=f;d<(h+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2));return}}c=e;if(d<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=e;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2&&(this.m_allPets[d].getState()!==FZ.GameDefs.DREAMPET_REMOVE||this.m_allPets[d-(FZ.GameDefs.DREAMPET_NUM_COL+2)].getState()!==FZ.GameDefs.DREAMPET_REMOVE);d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(d<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=e;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(d>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=e;d<(g+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(d>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&g<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=e;d<(g+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2;d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2))}c=f;if(k<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=f;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2;d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(k<=FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=f;0<d;d--){if(this.m_allPets[d-1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d-1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(k>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h>FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=f;d<(h+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d<FZ.GameDefs.ALL_GENERAL-(FZ.GameDefs.DREAMPET_NUM_COL+2);d+=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d+(FZ.GameDefs.DREAMPET_NUM_COL+2))}else if(k>FZ.GameDefs.DREAMPET_NUM_COL_HALF&&h<=FZ.GameDefs.DREAMPET_NUM_LINE_HALF){for(d=f;d<(h+1)*(FZ.GameDefs.DREAMPET_NUM_COL+2);d++){if(this.m_allPets[d+1].getState()===FZ.GameDefs.DREAMPET_REMOVE){c=d;break}this.exchagePet(d,d+1)}for(d=c;d>FZ.GameDefs.DREAMPET_NUM_COL+2;d-=FZ.GameDefs.DREAMPET_NUM_COL+2)this.exchagePet(d,d-(FZ.GameDefs.DREAMPET_NUM_COL+2))}}},exchagePet:function(a,b){var c=this.m_allPets[a].getCol(),e=this.m_allPets[a].getLine(),f=this.m_allPets[b].getCol(),g=this.m_allPets[b].getLine(),d=null,d=this.m_allPets[a];this.m_allPets[a]=this.m_allPets[b];this.m_allPets[a].setCol(c);this.m_allPets[a].setLine(e);this.m_allPets[a].updatePos();this.m_allPets[b]=d;this.m_allPets[b].setCol(f);this.m_allPets[b].setLine(g);this.m_allPets[b].updatePos();this.m_allPets[a].setPetFocus();this.m_allPets[b].setPetFocus()},getLeftPet:function(){return this.m_left_pet},getScore:function(){return this.m_score},setScore:function(a){this.m_score=a},getBonusTime:function(){return this.m_bonus_time},setBonusTime:function(a){this.m_bonus_time=a},onDrawPathLine:function(){FZ.GameBase.MainContext.strokeStyle="#ff0";FZ.GameBase.MainContext.lineWidth=3;for(var a=[],b=0;b<this.m_PointPath.length-1;++b)a[1]=this.m_PointPath[b+1][1],a[0]=this.m_PointPath[b+1][0],FZ.GameBase.MainContext.setTransform(this.m_worldMatrix.m11,this.m_worldMatrix.m12,this.m_worldMatrix.m21,this.m_worldMatrix.m22,this.m_worldMatrix.dx,this.m_worldMatrix.dy),FZ.GameBase.MainContext.beginPath(),FZ.GameBase.MainContext.moveTo(FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*this.m_PointPath[b][0]+FZ.GameDefs.GRID_WIDTH_HALF,FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*this.m_PointPath[b][1]+FZ.GameDefs.GRID_HEIGHT_HALF),FZ.GameBase.MainContext.lineTo(FZ.GameDefs.DREAMPET_OFFSET_X+FZ.GameDefs.GRID_WIDTH*a[0]+FZ.GameDefs.GRID_WIDTH_HALF,FZ.GameDefs.DREAMPET_OFFSET_Y+FZ.GameDefs.GRID_HEIGHT*a[1]+FZ.GameDefs.GRID_HEIGHT_HALF),FZ.GameBase.MainContext.closePath(),FZ.GameBase.MainContext.stroke()},showPets:function(){for(var a=null,b=0;b<FZ.GameDefs.ALL_GENERAL;b++)a=this.m_allPets[b],a.m_div&&(a.m_div.style.visibility="visible",FZ.GameDefs.DREAMPET_FOCUS===a.m_state&&(a.m_div_focus.style.visibility="visible"))},hidePets:function(){for(var a=null,b=0;b<FZ.GameDefs.ALL_GENERAL;b++)a=this.m_allPets[b],a.m_div&&(a.m_div.style.visibility="hidden",a.m_div_focus.style.visibility="hidden")},resumeLevel:function(){this.m_score=FZ.GameBase.SaveObject.m_cur_score;this.m_hintCount=FZ.GameBase.SaveObject.m_cur_hintCount;this.m_left_pet=FZ.GameBase.SaveObject.m_cur_left_pet;this.m_level=FZ.GameBase.SaveObject.m_cur_level;var a,b=null,c=b=0,e=0,f=FZ.GameDefs.DREAMPET_INIT;this.clearAllPets();for(a=0;a<FZ.GameDefs.ALL_GENERAL;a++)f=FZ.GameBase.SaveObject.m_data[a].state,e=FZ.GameBase.SaveObject.m_data[a].style,b=Math.floor(a/(FZ.GameDefs.DREAMPET_NUM_COL+2)),c=a%(FZ.GameDefs.DREAMPET_NUM_COL+2),b=new FZ.Diamond(b,c,e,f),this.m_allPets.push(b),FZ.GameDefs.DREAMPET_REMOVE!==f&&this.m_parent.appendChild(b.m_div),FZ.GameDefs.DREAMPET_FOCUS===f&&(this.m_firstPet=b)},saveLevel:function(){FZ.GameBase.SaveObject.m_gamein=!0;FZ.GameBase.SaveObject.m_cur_score=this.m_score;FZ.GameBase.SaveObject.m_cur_hintCount=this.m_hintCount;FZ.GameBase.SaveObject.m_cur_left_pet=this.m_left_pet;FZ.GameBase.SaveObject.m_level_usedTime=FZ.Game.GameState.m_level_usedTime;FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(FZ.GameBase.SaveObject.m_sound=FZ.Game.GameState.m_sound);var a,b=null,b=FZ.GameBase.SaveObject.m_data;for(a=0;a<FZ.GameDefs.ALL_GENERAL;a++)b[a].style=this.m_allPets[a].m_style,b[a].state=this.m_allPets[a].m_state;FZ.GameBase.saveGame()},initAllPets:function(a){var b=0,c=0,e=0;a=FZ.GameDefs.DREAMPET_INIT;var f=0,b=null,g;g=[];this.m_score=this.m_bonus_time=0;this.m_hintCount=FZ.GameDefs.LEVEL_HINT_NUMBER[this.getLevel()];this.clearAllPets();this.m_left_pet=FZ.GameDefs.ALL_PET_NUM;var d=0,h=0,d=FZ.Math.random(0,FZ.GameDefs.DIAMOND_TYPES-FZ.GameDefs.LEVEL_PET_KIND[FZ.GameBase.SaveObject.m_cur_level]);0>d&&(d=0);h=d+FZ.GameDefs.LEVEL_PET_KIND[FZ.GameBase.SaveObject.m_cur_level];for(f=0;f<FZ.GameDefs.ALL_GENERAL_HALF;f++){e=FZ.Math.random(d,h);a=FZ.GameDefs.DREAMPET_INIT;b=Math.floor(f/(FZ.GameDefs.DREAMPET_NUM_COL+2));c=f%(FZ.GameDefs.DREAMPET_NUM_COL+2);if(0===b||b===FZ.GameDefs.DREAMPET_NUM_LINE+1||0===c||c===FZ.GameDefs.DREAMPET_NUM_COL+1)a=FZ.GameDefs.DREAMPET_REMOVE,e=-1;b=new FZ.Diamond(b,c,e,a);this.m_allPets.push(b);FZ.GameDefs.DREAMPET_REMOVE!==a&&this.m_parent.appendChild(b.m_div);g.push(b)}for(f=FZ.GameDefs.ALL_GENERAL_HALF;f<FZ.GameDefs.ALL_GENERAL;f++){d=Math.floor(FZ.Math.random(0,g.length));a=FZ.GameDefs.DREAMPET_INIT;e=g[d].getStyle();b=Math.floor(f/(FZ.GameDefs.DREAMPET_NUM_COL+2));c=f%(FZ.GameDefs.DREAMPET_NUM_COL+2);if(-1===e)if(0!==b&&b!==FZ.GameDefs.DREAMPET_NUM_LINE+1&&0!==c&&c!==FZ.GameDefs.DREAMPET_NUM_COL+1)for(d=Math.floor(FZ.Math.random(0,g.length)),e=g[d].getStyle();-1===e;)d=Math.floor(FZ.Math.random(0,g.length)),e=g[d].getStyle();else a=FZ.GameDefs.DREAMPET_REMOVE,e=-1;else if(0===b||b===FZ.GameDefs.DREAMPET_NUM_LINE+1||0===c||c===FZ.GameDefs.DREAMPET_NUM_COL+1){d=Math.floor(FZ.Math.random(0,g.length));for(e=g[d].getStyle();-1!==e;)d=Math.floor(FZ.Math.random(0,g.length)),e=g[d].getStyle();a=FZ.GameDefs.DREAMPET_REMOVE}g.splice(d,1);b=new FZ.Diamond(b,c,e,a);this.m_allPets.push(b);FZ.GameDefs.DREAMPET_REMOVE!==a&&this.m_parent.appendChild(b.m_div)}this.m_leftNum=-1;this.m_dialog=!1},debugAllPetsType:function(){var a=0;debug_data=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,1,-1,-1,2,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,-1,1,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];for(a=0;a<FZ.GameDefs.ALL_GENERAL;a++)-1!==debug_data[a]&&(this.m_allPets[a].m_module=debug_data[a],this.m_allPets[a].m_style=debug_data[a]),this.m_allPets[a].setModule(),-1===debug_data[a]?this.m_allPets[a].m_state=-1:this.m_allPets[a].m_state=0},getDiamondNumber:function(a){for(var b=0,c=0,e=null,c=a;c<FZ.GameDefs.ALL_GENERAL;c+=FZ.GameDefs.DIAMOND_COL_NUM)e=this.m_allPets[c],null!==e&&b++;return b},getLeftDiamonds:function(){for(var a=null,b=0,c=0,b=0;b<FZ.GameDefs.ALL_GENERAL;b++)(a=this.m_allPets[b])&&c++;return c},getLevel:function(){return this.m_level},setLevel:function(a){this.m_level=a},getHintCount:function(){return this.m_hintCount},setHintCount:function(a){this.m_hintCount=a},mouseHandler:function(a){a.preventDefault();var b=!1,b="",c=0,e=0;if(this.m_reset_finished){FZ.TARGET_DEF.MOBILE===FZ.TargetPort?FZ.EVENT_DEF.T_START===a.type?(b=FZ.EVENT_DEF.M_MOVE,c=a.touches[0].pageX-FZ.DivManager.getOffsetX(),e=a.touches[0].pageY-FZ.DivManager.getOffsetY(),this.m_last_x=c,this.m_last_y=e):FZ.EVENT_DEF.T_MOVE===a.type?(b=FZ.EVENT_DEF.M_MOVE,c=a.touches[0].pageX-FZ.DivManager.getOffsetX(),e=a.touches[0].pageY-FZ.DivManager.getOffsetY(),this.m_last_x=c,this.m_last_y=e):FZ.EVENT_DEF.T_END===a.type&&(b=FZ.EVENT_DEF.M_CLICK,c=this.m_last_x,e=this.m_last_y,this.m_last_x=0,this.m_last_y=0):(c=a.pageX-FZ.DivManager.getOffsetX(),e=a.pageY-FZ.DivManager.getOffsetY(),b=a.type);if(FZ.EVENT_DEF.M_MOVE!==b&&FZ.EVENT_DEF.M_CLICK===b){b=this.setPetDisappear(c,e);if(!1===b)return;this.m_observer&&this.m_observer.checkWin&&this.m_observer.checkWin()}return!1}}});(function(){FZ.UIButton=FZ.newClass({SWITCH_ON:0,SWITCH_OFF:1,m_w:0,m_h:0,m_col:1,m_div:null,m_img_list:null,m_call_mOver:null,m_call_mOut:null,m_call_mMove:null,m_call_mClick:null,m_call_tStart:null,m_call_tMove:null,m_call_tEnd:null,m_is_switch:!1,m_btn_state:0,m_observer:null,m_enable:!0,m_clickFlag:!1,COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",init:function(a,b,c,e,f){this.m_col=c;this.m_w=a;this.m_h=b;this.m_div=document.createElement("div");this.m_div.style.position="absolute";this.m_div.style.width=this.m_w+"px";this.m_div.style.height=this.m_h+"px";this.m_img_list=[];this.m_img_list.push(e);this.m_img_list.push(f);this.m_div.style.backgroundRepeat="no-repeat";this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[0]+")";this.m_div.style.backgroundPosition="0px 0px";this.m_enable=!0;this.m_is_switch=!1;this.setEnable(this.m_enable);this.m_clickFlag=!1},setSwitchButton:function(a,b){this.m_is_switch=!0;this.m_btn_state=this.SWITCH_ON;this.m_img_list.push(a);this.m_img_list.push(b)},setSwitchState:function(a){var b=0;this.m_btn_state=a;this.SWITCH_OFF===this.m_btn_state&&(b=2);this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[b+0]+")"},setEnable:function(a){(this.m_enable=a)?this.addEvent():this.removeEvent()},setPos:function(a,b){this.m_div.style.left=a+"px";this.m_div.style.top=b+"px"},addEvent:function(){this.removeEvent();FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.T_START,this.mouseHandler),FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.T_MOVE,this.mouseHandler),FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.T_END,this.mouseHandler)):(FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.M_OVER,this.mouseHandler),FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.M_MOVE,this.mouseHandler),FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.M_OUT,this.mouseHandler),FZ.EventHandler(this,this.m_div,FZ.EVENT_DEF.M_CLICK,this.mouseHandler))},removeEvent:function(){FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.T_START,this.m_call_tStart),this.m_call_tStart=null,FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.T_MOVE,this.m_call_tMove),this.m_call_tMove=null,FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.T_END,this.m_call_tEnd),this.m_call_tEnd=null):(FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.M_OVER,this.m_call_mOver),this.m_call_mOver=null,FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.M_OUT,this.m_call_mOut),this.m_call_mOut=null,FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.M_MOVE,this.m_call_mMove),this.m_call_mMove=null,FZ.EventRemove(this,this.m_div,FZ.EVENT_DEF.M_CLICK,this.m_call_mClick),this.m_call_mClick=null)},addMonitor:function(a){this.m_observer=a},removeMonitor:function(){this.m_observer=null},mouseHandler:function(a){var b="",c=0;a.stopPropagation();a.preventDefault();this.m_is_switch&&this.SWITCH_OFF===this.m_btn_state&&(c=2);FZ.TARGET_DEF.MOBILE===FZ.TargetPort?(FZ.EVENT_DEF.T_START===a.type&&(b=FZ.EVENT_DEF.M_OVER),FZ.EVENT_DEF.T_END===a.type&&(b=FZ.EVENT_DEF.M_CLICK)):b=a.type;FZ.EVENT_DEF.M_OVER===b?!0===FZ.Game.GameState.m_gamePause?this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HOME_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_MAIN_MENU_ICON_TOUCH.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HINT_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT_GREY.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_PAUSE_INDEX]?(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+1]+")",this.m_div.style.color=this.COLOR_BROWN):void 0!==FZ.Game.GameState.BTN_SOUND_INDEX&&(this.SWITCH_OFF===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_OFF_GREY.png)"),this.SWITCH_ON===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_GREY.png)")):(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+1]+")",this.m_div.style.color=this.COLOR_BROWN):FZ.EVENT_DEF.M_OUT===b?!0===FZ.Game.GameState.m_gamePause?this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HOME_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_MAIN_MENU_ICON.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HINT_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT_GREY.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_PAUSE_INDEX]?(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+0]+")",this.m_div.style.color=this.COLOR_ORANGE):void 0!==FZ.Game.GameState.BTN_SOUND_INDEX&&(this.SWITCH_OFF===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_OFF_GREY.png)"),this.SWITCH_ON===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_GREY.png)")):(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+0]+")",this.m_div.style.color=this.COLOR_ORANGE):FZ.EVENT_DEF.M_CLICK===b&&(this.m_clickFlag=!0,!0===FZ.Game.GameState.m_gamePause?this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HOME_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_MAIN_MENU_ICON.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HINT_INDEX]?this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT_GREY.png)":this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_PAUSE_INDEX]?(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+0]+")",this.m_div.style.color=this.COLOR_ORANGE):void 0!==FZ.Game.GameState.BTN_SOUND_INDEX&&(this.SWITCH_OFF===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_OFF_GREY.png)"),this.SWITCH_ON===this.m_btn_state&&this===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX]&&(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_GREY.png)")):(this.m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_img_list[c+0]+")",this.m_div.style.color=this.COLOR_ORANGE));null!==this.m_observer&&this.m_observer.buttonClick&&(b===FZ.EVENT_DEF.M_CLICK||b===FZ.EVENT_DEF.T_END)&&this.m_clickFlag&&(this.m_observer.buttonClick(this),this.m_clickFlag=!1);return!1}})})();(function(){FZ.UIMenu=FZ.newClass({MENU_SHOW:0,MENU_HIDE:1,m_div:null,m_back_div:null,m_btn_list:null,m_back_w:0,m_back_h:0,m_observer:null,m_state:0,m_show_x:0,m_show_y:0,m_hide_x:0,m_hide_y:0,m_btn_enable:null,init:function(){this.m_div=document.createElement("div");this.m_div.style.position="absolute";this.m_div.style.webkitTransition="translate";this.m_btn_list=[];this.m_back_div=document.createElement("div");this.setState(this.MENU_SHOW,0)},setBackImage:function(a,b,c){void 0!==b&&(this.m_back_w=b);void 0!==c&&(this.m_back_h=c);this.m_div.style.width=this.m_back_w+"px";this.m_div.style.height=this.m_back_h+"px";this.m_back_div.style.width=this.m_back_w+"px";this.m_back_div.style.height=this.m_back_h+"px";this.m_back_div.style.position="absolute";this.m_back_div.style.backgroundRepeat="no-repeat";this.m_back_div.style.backgroundImage="url(./linkMonsters/res/images/"+a+")";this.m_back_div.style.backgroundPosition="0px; 0px";this.m_div.appendChild(this.m_back_div)},setzIndex:function(a){this.m_div.style.zIndex=a},setPos:function(a,b){this.m_div.style.webkitTransitionDuration="0.2s";this.m_div.style.webkitTransform="translate("+a+"px, "+b+"px)"},setShowPos:function(a,b){this.m_show_x=a;this.m_show_y=b},setHidePos:function(a,b){this.m_hide_x=a;this.m_hide_y=b},addMonitor:function(a){this.m_observer=a},removeMonitor:function(){this.m_observer=null},setEnableBtn:function(a){this.m_btn_enable=a;a.m_div.style.zIndex=1},addButton:function(a){this.m_div.appendChild(a.m_div);this.m_btn_list.push(a)},addEnableBtn:function(){switch(this.m_state){case this.MENU_SHOW:this.m_btn_enable&&this.m_btn_enable.setSwitchState(this.m_btn_enable.SWITCH_OFF);break;case this.MENU_HIDE:this.m_btn_enable&&this.m_btn_enable.setSwitchState(this.m_btn_enable.SWITCH_ON)}},setState:function(a,b){this.m_state=a;switch(this.m_state){case this.MENU_SHOW:this.setPos(this.m_show_x,this.m_show_y);break;case this.MENU_HIDE:this.setPos(this.m_hide_x,this.m_hide_y)}this.addEnableBtn()},removeButton:function(a){for(var b=-1,c=0,c=0;c<this.m_btn_list.length;c++)if(a===this.m_btn_list[c]){b=c;break}-1!==b&&(a.removeEvent(),a.removeMonitor(),this.m_btn_list.splice(b,1))},addEvent:function(){for(var a=0,b=null,a=0;a<this.m_btn_list.length;a++)b=this.m_btn_list[a],b.addMonitor(this),b.setEnable(!0)},removeEvent:function(a){a=0;var b=null;for(a=0;a<this.m_btn_list.length;a++)b=this.m_btn_list[a],b.removeMonitor(),b.setEnable(!1)},buttonClick:function(a){null!==this.m_observer&&this.m_observer.menuItemClick&&this.m_observer.menuItemClick(a)}})})();(function(){var a=null,b=null;FZ.GameBase.MOBILE_IPAD=10;FZ.GameBase.MOBILE_IPHONE=20;FZ.GameBase.Width=700;FZ.GameBase.Height=500;FZ.GameBase.Name="DreamFarmLinkHtml5";FZ.TARGET_DEF={};FZ.TARGET_DEF.PC="pc";FZ.TARGET_DEF.MOBILE="mobile";FZ.TARGET_DEF.IPHONE="iPhone";FZ.TARGET_DEF.IPAD="iPad";FZ.TARGET_DEF.ANDRIOD="Android";FZ.TargetPort=FZ.TARGET_DEF.PC;FZ.TargetMobile=FZ.TARGET_DEF.IPHONE;FZ.EVENT_DEF={};FZ.EVENT_DEF.M_OVER="mouseover";FZ.EVENT_DEF.M_OUT="mouseout";FZ.EVENT_DEF.M_MOVE="mousemove";FZ.EVENT_DEF.M_CLICK="click";FZ.EVENT_DEF.T_START="touchstart";FZ.EVENT_DEF.T_MOVE="touchmove";FZ.EVENT_DEF.T_END="touchend";FZ.GameBase.setCss=function(a,b){a.style.width=b.w+"px";a.style.height=b.h+"px";a.style.left=b.x+"px";a.style.top=b.y+"px";a.style.position="absolute";a.style.backgroundRepeat="no-repeat";a.style.backgroundImage="url(./linkMonsters/res/images/"+b.fileURL+")"};FZ.PrintLog=function(a){};var c=function(){90===window.orientation||-90===window.orientation?(b.style.display="none",a.style.display="inline",FZ.Game.GameState.pageHide()):0===window.orientation&&(b.style.display="inline",a.style.display="none",FZ.Game.GameState.pageShow());var c=0;FZ.TARGET_DEF.ANDRIOD===FZ.TargetMobile&&(c=1);setTimeout(function(){window.scrollTo(0,c)},10)},e=function(){var a=0;FZ.TARGET_DEF.ANDRIOD===FZ.TargetMobile&&(a=1);setTimeout(function(){window.scrollTo(0,a)},1E3)},f=function(a){a.stopPropagation();return!1};FZ.GameBase.ArrayIndexof=function(a,b){for(var c=0,c=0;c<a.length;c++)if(b===a[c])return c;return-1};window.addEventListener("load",function(){var g=null,d=null;FZ.GameBase.loadGame();if(void 0===FZ.GameBase.SaveObject.m_cur_level){FZ.GameBase.SaveObject.m_cur_level=0;FZ.GameBase.SaveObject.pass=!1;FZ.GameBase.SaveObject.score=0;FZ.GameBase.SaveObject.m_hint=FZ.GameDefs.LEVEL_HINT_NUMBER[1];FZ.GameBase.SaveObject.m_gamein=!1;FZ.GameBase.SaveObject.m_cur_score=0;FZ.GameBase.SaveObject.m_cur_hintCount=FZ.GameDefs.LEVEL_HINT_NUMBER[1];FZ.GameBase.SaveObject.m_cur_left_pet=FZ.GameDefs.ALL_PET_NUM;FZ.GameBase.SaveObject.m_level_usedTime=0;FZ.GameBase.SaveObject.m_usedTime=0;FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(FZ.GameBase.SaveObject.m_sound=!0);for(var g=0,h=d=null,h=[],g=0;g<FZ.GameDefs.ALL_GENERAL;g++)d={style:-1},d.state=FZ.GameDefs.DREAMPET_INIT,h.push(d);FZ.GameBase.SaveObject.m_data=h;FZ.GameBase.saveGame()}b=FZ.$("mainDiv");a=FZ.$("orientationDiv");FZ.GameBase.animDiv=FZ.$("animDiv");a.style.display="none";/(iPhone|iPad|iPod|Android)/i.test(window.navigator.appVersion)&&(FZ.TargetPort=FZ.TARGET_DEF.MOBILE,FZ.TargetMobile=FZ.TARGET_DEF.IPHONE,-1!==navigator.userAgent.indexOf("iPad")?FZ.TargetMobile=FZ.TARGET_DEF.IPAD:-1!==navigator.userAgent.indexOf("Android")&&(FZ.TargetMobile=FZ.TARGET_DEF.ANDRIOD));g=document.createElement("meta");d=document.getElementsByTagName("head");FZ.TARGET_DEF.IPAD===FZ.TargetMobile?(g.setAttribute("name","viewport"),g.setAttribute("content","width=320,target-densitydpi=device-dpi,user-scalable=no"),d[0].appendChild(g)):(g.setAttribute("name","viewport"),g.setAttribute("content","width=320,target-densitydpi=device-dpi,user-scalable=no"),d[0].appendChild(g));window.scrollTo(0,0);FZ.DivManager.init();FZ.DivManager.setParent(b);FZ.DivManager.setSize(FZ.GameDefs.SCREEN_W,FZ.GameDefs.SCREEN_H);FZ.DivManager.setOffset(b.offsetLeft,b.offsetTop);FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_PRELOADING);FZ.TARGET_DEF.MOBILE===FZ.TargetPort&&(window.onscroll=e,window.addEventListener("orientationchange",c,!1));document.addEventListener("touchstart",f,!1);c();FZ.PrintLog("test log")},!1);FZ.EventHandler=function(a,b,c,e){if(b)switch(c){case FZ.EVENT_DEF.M_OVER:b.addEventListener(FZ.EVENT_DEF.M_OVER,a.m_call_mOver=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.M_OUT:b.addEventListener(FZ.EVENT_DEF.M_OUT,a.m_call_mOut=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.M_MOVE:b.addEventListener(FZ.EVENT_DEF.M_MOVE,a.m_call_mMove=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.M_CLICK:b.addEventListener(FZ.EVENT_DEF.M_CLICK,a.m_call_mClick=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.T_START:b.addEventListener(FZ.EVENT_DEF.T_START,a.m_call_tStart=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.T_MOVE:b.addEventListener(FZ.EVENT_DEF.T_MOVE,a.m_call_tMove=function(b){e.call(a,b)},!1);break;case FZ.EVENT_DEF.T_END:b.addEventListener(FZ.EVENT_DEF.T_END,a.m_call_tEnd=function(b){e.call(a,b)},!1)}};FZ.EventRemove=function(a,b,c,e){if(b&&e)switch(c){case FZ.EVENT_DEF.M_OVER:b.removeEventListener(FZ.EVENT_DEF.M_OVER,e,!1);a.m_call_mOver=null;break;case FZ.EVENT_DEF.M_OUT:b.removeEventListener(FZ.EVENT_DEF.M_OUT,e,!1);a.m_call_mOut=null;break;case FZ.EVENT_DEF.M_MOVE:b.removeEventListener(FZ.EVENT_DEF.M_MOVE,e,!1);a.m_call_mMove=null;break;case FZ.EVENT_DEF.M_CLICK:b.removeEventListener(FZ.EVENT_DEF.M_CLICK,e,!1);a.m_call_mClick=null;break;case FZ.EVENT_DEF.T_START:b.removeEventListener(FZ.EVENT_DEF.T_START,e,!1);a.m_call_tStart=null;break;case FZ.EVENT_DEF.T_MOVE:b.removeEventListener(FZ.EVENT_DEF.T_MOVE,e,!1);a.m_call_tMove=null;break;case FZ.EVENT_DEF.T_END:b.removeEventListener(FZ.EVENT_DEF.T_END,e,!1),a.m_call_tEnd=null}}})();FZ.Game.LogoState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_LOGO,CUR_UI_DEFS:["SpilSplash"],m_test_timer:0,preProcess:function(){this.m_main_div.style.webkitTransition="opacity";this.m_main_div.style.backgroundColor="#fff";this.m_main_div.style.width=FZ.GameDefs.SCREEN_W+"px";this.m_main_div.style.height=FZ.GameDefs.SCREEN_H+"px";this.m_main_div.style.webkitTransitionDuration="0s";this.m_main_div.style.opacity=0;FZ.DivManager.addChild(this.m_main_div);this.m_timer=setTimeout(FZ.Tools.bind(this,this.fade_in),10)},postProcess:function(){FZ.DivManager.removeChild(this.m_main_div);clearTimeout(this.m_timer)},fade_in:function(){this.m_main_div.style.webkitTransitionDuration="1s";this.m_main_div.style.opacity=1;this.m_timer=setTimeout(FZ.Tools.bind(this,this.fade_out),10)},fade_out:function(){this.m_main_div.style.webkitTransitionDuration="1s";this.m_main_div.style.opacity=0;this.m_timer=setTimeout(FZ.Tools.bind(this,this.fade_end),10)},fade_end:function(){FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_LOADING)},AIUpdate:function(a){}},FZ.BaseState));FZ.Game.LoadingState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_LOADING,CUR_UI_DEFS:["majong_BG","MAIN_MENU_AND_LOADING_BG","loading_empty","loading_full"],m_test_timer:0,m_bar_w:0,m_bar_div:null,preProcess:function(){var a=this,b=0,c=null;this.createUIs(this.CUR_UI_DEFS);c=FZ.getImgInfo(this.CUR_UI_DEFS[3]);this.m_bar_w=c.w;this.m_bar_div=this.m_ui_list[3];this.m_bar_div.style.overflow="hidden";this.m_bar_div.style.display="none";for(b=0;b<FZ.IphoneUI.length;b++)c=FZ.IphoneUI[b],FZ.spriteManager.addResource(c.name,c.zOrder,"./linkMonsters/res/images/"+c.fileURL,c.x,c.y,c.cols);FZ.ResourceManager.addResource({Name:"BGMusic",Type:"Audio",URL:FZ.IphoneMusic[0]});FZ.DivManager.addChild(this.m_main_div);this.resetTranslate(0);setTimeout(function(){a.fade_in.call(a,2E3,1)},10);this.m_timer=setTimeout(FZ.Tools.bind(this,this.AIUpdate),100)},postProcess:function(){FZ.DivManager.removeChild(this.m_main_div);clearTimeout(this.m_timer)},AIUpdate:function(a){a=0;this.m_timer=setTimeout(FZ.Tools.bind(this,this.AIUpdate),200);0!==FZ.ResourceManager.__ResourceCount&&(a=this.m_bar_w*FZ.ResourceManager.__ResourceLoaded/FZ.ResourceManager.__ResourceCount);this.m_bar_div.style.width=""+a+"px";this.m_bar_div.style.display="inline";FZ.ResourceManager.isResourceLoaded()&&(FZ.Music.set(FZ.ResourceManager.ResourceLib.BGMusic.Resource,!0),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN))}},FZ.BaseState));FZ.Game.MainmenuState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_MAINMEN,CUR_UI_DEFS:["majong_BG","MAIN_MENU_BG"],BTN_PLAY_INDEX:0,CUR_BTN_ANDROID_DEFS:[["BTN_START","BTN_START_TOUCH"]],CUR_BTN_DEFS:[["BTN_START","BTN_START_TOUCH"],["BTN_MENU_SOUND","BTN_MENU_SOUND_TOUCH"]],SOUND_SWITCH_DEFS:["BTN_MENU_SOUND_OFF","BTN_MENU_SOUND_OFF_TOUCH"],BTN_NEW_GAME_INDEX:0,BTN_SOUND_INDEX:1,m_load_ui:!1,m_next_state:"",COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,createBtnTextSprite:function(a,b,c){var e=a.m_h;a.m_div.style.textAlign="center";a.m_div.style.lineHeight=a.m_div.style.height;a.m_div.style.fontFamily="Arial";a.m_div.style.fontWeight="bold";a.m_div.style.fontSize=Math.round(e/4)+"px";a.m_div.style.textShadow="-2px -2px 2px #7D2D1B, 2px 2px 2px #7D2D1B, 2px -2px 2px #7D2D1B, -2px 2px 2px #7D2D1B ";a.m_div.style.color=c;a.m_div.innerHTML=b;return a},preProcess:function(){var a=null,a=null,b=this;this.m_load_ui||(this.createUIs(this.CUR_UI_DEFS),FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD?this.createBtns(this.CUR_BTN_DEFS,!0):this.createBtns(this.CUR_BTN_ANDROID_DEFS,!0),FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(a=FZ.getImgInfo(this.SOUND_SWITCH_DEFS[0]),window.cloneInfo=FZ.getImgInfo(this.SOUND_SWITCH_DEFS[1]),this.m_btn_list[this.BTN_SOUND_INDEX].setSwitchButton(a.fileURL,cloneInfo.fileURL)),FZ.DivManager.addChild(this.m_main_div),FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_sound=FZ.GameBase.SaveObject.m_sound,FZ.Music.setMute(!this.m_sound)),this.m_load_ui=!0);FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_sound=FZ.GameBase.SaveObject.m_sound,a=this.m_btn_list[this.BTN_SOUND_INDEX],!0===this.m_sound?a.setSwitchState(a.SWITCH_ON):a.setSwitchState(a.SWITCH_OFF));0===FZ.GameBase.SaveObject.m_cur_level?(this.m_btn_list[this.BTN_PLAY_INDEX].setEnable(!0),this.m_btn_list[this.BTN_PLAY_INDEX].m_div.style.display="inline",this.createBtnTextSprite(this.m_btn_list[this.BTN_PLAY_INDEX],FZ.GameText.TEXT_START_GAME,this.COLOR_ORANGE)):FZ.GameBase.SaveObject.pass?(this.m_btn_list[this.BTN_PLAY_INDEX].setEnable(!0),this.m_btn_list[this.BTN_PLAY_INDEX].m_div.style.display="inline",this.createBtnTextSprite(this.m_btn_list[this.BTN_PLAY_INDEX],FZ.GameText.TEXT_START_GAME,this.COLOR_ORANGE),FZ.GameBase.SaveObject.m_cur_level=0,FZ.GameBase.SaveObject.pass=!1,FZ.GameBase.SaveObject.score=0,FZ.GameBase.SaveObject.m_hint=FZ.GameDefs.LEVEL_HINT_NUMBER[1],FZ.GameBase.SaveObject.m_totalUsedHint=0,FZ.GameBase.SaveObject.m_gamein=!1,FZ.GameBase.saveGame()):(this.m_btn_list[this.BTN_PLAY_INDEX].setEnable(!0),this.m_btn_list[this.BTN_PLAY_INDEX].m_div.style.display="inline",this.createBtnTextSprite(this.m_btn_list[this.BTN_PLAY_INDEX],FZ.GameText.TEXT_START_GAME,this.COLOR_ORANGE));this.m_main_div.style.display="inline";this.resetTranslate(0.5);setTimeout(function(){b.fade_in.call(b,2E3,1)},10)},postProcess:function(){this.m_next_state!==FZ.StateDefs.GAME_STATE_GAME_CLEAR&&this.fade_out(2E3,0,0)},pause:function(){clearTimeout(this.m_timer)},resume:function(){0<arguments.length&&(statename=arguments[0]);1<arguments.length&&("yes"===arguments[1]?(FZ.GameBase.SaveObject.m_cur_level=0,FZ.GameBase.SaveObject.pass=!1,FZ.GameBase.SaveObject.score=0,FZ.GameBase.SaveObject.m_hint=FZ.GameDefs.LEVEL_HINT_NUMBER[1],FZ.GameBase.SaveObject.m_totalUsedHint=0,FZ.GameBase.SaveObject.m_gamein=!1,FZ.GameBase.saveGame(),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_IN)):this.m_next_state=FZ.StateDefs.GAME_STATE_MAINMEN)},buttonClick:function(a){this.m_btn_list[this.BTN_PLAY_INDEX]===a?FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_IN):this.m_btn_list[this.BTN_SOUND_INDEX]===a&&(this.m_sound=!this.m_sound,FZ.Music.setMute(!this.m_sound),this.m_sound?a.setSwitchState(a.SWITCH_ON):a.setSwitchState(a.SWITCH_OFF),FZ.GameBase.SaveObject.m_sound=this.m_sound,FZ.GameBase.saveGame())}},FZ.BaseState));FZ.Game.ResetState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_RESET,CUR_UI_DEFS:["NEXT_LEVEL_BG","TXT_ARE_YOU_SURE"],BTN_YES_INDEX:0,BTN_NO_INDEX:1,CUR_BTN_DEFS:[["BTN_GAME_YES","BTN_GAME_YES_TOUCH"],["BTN_GAME_NO","BTN_GAME_NO_TOUCH"]],m_ui_list:null,m_btn_list:null,popState:!1,m_load_ui:!1,COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",COLOR_TITLE:"#FEE7B4",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,preProcess:function(){var a=this;this.m_load_ui?this.m_main_div.style.display="inline":(this.createUIs(this.CUR_UI_DEFS),this.createBtns(this.CUR_BTN_DEFS,!0),FZ.DivManager.addChild(this.m_main_div),this.m_load_ui=!0);this.popState=!1;setTimeout(function(){a.fade_in.call(a,2E3,1)},10)},postProcess:function(){this.m_main_div.style.display="none"},buttonClick:function(a){this.popState||(this.m_btn_list[this.BTN_YES_INDEX]===a?(this.postProcess(),this.popState=!0,FZ.GameBase.popState(this.StateName,"yes")):this.m_btn_list[this.BTN_NO_INDEX]===a&&(this.postProcess(),this.popState=!0,FZ.GameBase.popState(this.StateName,"no")))}},FZ.BaseState));(function(){FZ.Game.GameState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_GAME_IN,CUR_UI_DEFS:"gameIn_BG TIME_EMPTY TIME__FULL NUM_LEVEL_10 NUM_LEVEL_0 ARROW_UP_DOWN ARROW_LEFT_RIGHT ARROW_DOWN ARROW_RIGHT ARROW_LEFT ARROW_UP score_1 score_2 score_3 score_4 score_5".split(" "),UI_ARROW_START_INDEX:5,UI_ARROW_KINDS:6,UI_SCORE_START_INDEX:11,UI_TIME_BAR_INDEX:2,UI_LEVEL_TEN_INDEX:3,UI_LEVEL_NUM_INDEX:4,BTN_HOME_INDEX:0,BTN_HINT_INDEX:1,BTN_PAUSE_INDEX:2,BTN_START_INDEX:3,BTN_SOUND_INDEX:3,CUR_BTN_DEFS:[["BTN_MAIN_MENU_ICON","BTN_MAIN_MENU_ICON_TOUCH"],["BTN_HINT","BTN_HINT_TOUCH"],["BTN_PAUSE","BTN_PAUSE_TOUCH"],["BTN_SOUND","BTN_SOUND_TOUCH"]],CUR_BTN_ANDROID_DEFS:[["BTN_MAIN_MENU_ICON","BTN_MAIN_MENU_ICON_TOUCH"],["BTN_HINT","BTN_HINT_TOUCH"],["BTN_PAUSE","BTN_PAUSE_TOUCH"]],CUR_SWITCH_DEFS:["BTN_GAME_BACK","BTN_GAME_BACK_TOUCH"],SOUND_SWITCH_DEFS:["BTN_SOUND_OFF","BTN_SOUND_OFF_TOUCH"],m_isNoMatch:!1,m_label_list:null,m_levelStart:!1,m_diamondMgr:null,m_load_ui:!1,m_curLevel_div:null,m_curLevel10_div:null,m_next_state:"",m_slide_menu:null,m_hint_num_div:null,m_pause_div:null,m_str_nomatch_div:null,m_time_bar_div:null,m_time_bar_w:0,m_call_tStart:null,m_call_mClick:null,m_call_time:null,m_level_usedTime:0,levelStartTime:0,levelCurrentTime:0,levelPauseStartTime:0,levelPauseEndTime:0,levelPauseTime:0,curLevelUsedTime:0,m_showPage:!1,m_gamePause:!1,pageHiddin:!1,STR_SCORE_RECT:[120,28,50,20],STR_TIME_RECT:[120,48,50,20],COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",COLOR_PAUSE:"#c2fa41",COLOR_NOMATCH:"#ffe16f",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,LABEL_PAUSE_SIZE:30,createLevelTextSprite:function(a,b,c,e,f,g,d){var h=document.createElement("div");h.style.position="absolute";h.style.width=c+"px";h.style.height=e+"px";h.style.left=a+"px";h.style.top=b+"px";h.style.textAlign="center";h.style.lineHeight=e+"px";h.style.fontFamily="Arial";h.style.fontWeight="bold";h.style.fontSize=d+"px";h.style.textShadow="-1px -1px 1px #ffffff, 1px 1px 1px #ffffff, 1px -1px 1px #ffffff, -1px 1px 1px #ffffff ";h.style.color=g;h.innerHTML=f;return h},createLabelTextSprite_:function(a,b,c,e){a.style.textAlign="center";a.style.lineHeight=a.style.height;a.style.fontFamily="Arial";a.style.fontWeight="bold";a.style.fontSize=Math.round(e)+"px";a.style.textShadow="-1px -1px 1px #FFFFFF, 1px 1px 1px #FFFFFF, 1px -1px 1px #FFFFFF, -1px 1px 1px #FFFFFF ";a.style.color=c;a.innerHTML=b},createPauseTextSprite:function(a,b,c,e){a.style.textAlign="center";a.style.lineHeight=Math.round(10*a.style.height/36);a.style.fontFamily="Arial";a.style.fontWeight="bolder";a.style.textIndent="-20px";a.style.paddingTop=Math.round(10*a.style.height/36);a.style.fontSize=Math.round(e)+"px";a.style.textShadow="-2px -2px 2px #B97F00, 2px 2px 2px #B97F00, 2px -2px 2px #B97F00, -2px 2px 2px #B97F00 ";a.style.color=c;a.innerHTML=b},createLabelTextSprite:function(a,b,c,e){a.style.textAlign="center";a.style.lineHeight=a.style.height;a.style.fontFamily="Arial";a.style.fontWeight="bold";a.style.fontSize=Math.round(e)+"px";a.style.textShadow="-2px -2px 2px #B97F00, 2px 2px 2px #B97F00, 2px -2px 2px #B97F00, -2px 2px 2px #B97F00 ";a.style.color=c;a.innerHTML=b},createStrDiv:function(a){var b=document.createElement("div");b.style.position="absolute";b.style.width=a[2]+"px";b.style.height=a[3]+"px";b.style.left=a[0]+"px";b.style.top=a[1]+"px";b.style.color="#fff";b.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";b.style.fontFamily="Arial";b.style.lineHeight=a[3]+"px";b.style.textAlign="left";this.m_main_div.appendChild(b);return b},pause:function(){clearTimeout(this.m_timer)},resume:function(){var a=null;0<arguments.length&&(a=arguments[0]);if(null!==this.m_diamondMgr)if(this.m_time_bar_div.style.display="inline",FZ.StateDefs.GAME_STATE_OVER==a){this.m_time_bar_div.style.width=this.m_time_bar_w+"px";this.m_btn_list[this.BTN_HINT_INDEX].setEnable(!0);this.m_diamondMgr.initAllPets(!0);this.m_diamondMgr.showPets();this.levelPauseEndTime=this.levelPauseStartTime=this.levelCurrentTime=this.levelStartTime=(new Date).getTime();this.curLevelUsedTime=this.levelPauseTime=0;this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_btn_list[this.BTN_HINT_INDEX].m_img_list[0]+")";this.m_game_bg_div=this.m_ui_list[1];this.m_diamondMgr.setHintCount(FZ.GameBase.SaveObject.m_hint);this.m_diamondMgr.setLevel(FZ.GameBase.SaveObject.m_cur_level);a=this.m_diamondMgr.getHintCount();this.m_hint_num_div[0].style.visibility="visible";this.m_hint_num_div[1].style.visibility="visible";if(10<=a){var b=Math.floor(a%10);this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+b+".png )";b=Math.floor(a/10);this.m_hint_num_div[1].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+b+".png )"}else 0===a?(this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden"):(this.m_hint_num_div[1].style.visibility="hidden",this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+a+".png )");a=this.m_diamondMgr.getLevel();b=null;b=FZ.getImgInfo("NUM_LEVEL_"+a);this.m_curLevel10_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png )";this.m_curLevel_div.style.backgroundImage="url(./linkMonsters/res/images/"+b.fileURL+")";this.m_diamondMgr.setParent(this.m_main_div)}else if(FZ.StateDefs.GAME_STATE_NEXT_LEVEL==a){this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/"+this.m_btn_list[this.BTN_HINT_INDEX].m_img_list[0]+")";this.m_time_bar_div.style.width=this.m_time_bar_w+"px";this.m_btn_list[this.BTN_HINT_INDEX].setEnable(!0);this.m_diamondMgr.initAllPets(!0);this.m_diamondMgr.hidePets();this.levelPauseEndTime=this.levelPauseStartTime=this.levelCurrentTime=this.levelStartTime=(new Date).getTime();this.curLevelUsedTime=this.levelPauseTime=0;this.m_hint_num_div[0].style.visibility="visible";this.m_hint_num_div[1].style.visibility="visible";a=FZ.GameBase.SaveObject.m_hint;10<=a?(b=Math.floor(a%10),this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+b+".png )",b=Math.floor(a/10),this.m_hint_num_div[1].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+b+".png )"):0===a?(this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden"):(this.m_hint_num_div[1].style.visibility="hidden",this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+a+".png )");this.m_diamondMgr.setLevel(FZ.GameBase.SaveObject.m_cur_level);this.m_diamondMgr.setHintCount(FZ.GameBase.SaveObject.m_hint);a=this.m_diamondMgr.getLevel();switch(a){case 1:case 2:case 4:case 6:this.m_levelStart=!0;this.m_diamondMgr.showPets();for(b=0;b<this.UI_ARROW_KINDS;b++)this.m_ui_list[this.UI_ARROW_START_INDEX+b].style.display="none";this.m_diamondMgr.setParent(this.m_main_div);break;case 3:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX].style.display="inline";break;case 5:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+1].style.display="inline";break;case 7:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+2].style.display="inline";break;case 8:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+3].style.display="inline";break;case 9:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+4].style.display="inline";break;case 10:this.m_levelStart=!1,this.m_diamondMgr.hidePets(),this.m_ui_list[this.UI_ARROW_START_INDEX+5].style.display="inline"}b=null;b=FZ.getImgInfo("NUM_LEVEL_"+a);10===a?(this.m_curLevel_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)",this.m_curLevel_div.style.display="inline",this.m_curLevel10_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_1.png )",this.m_curLevel10_div.style.display="inline"):(this.m_curLevel_div.style.backgroundImage="url(./linkMonsters/res/images/"+b.fileURL+")",this.m_curLevel_div.style.display="inline",this.m_curLevel10_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)",this.m_curLevel10_div.style.display="inline")}else if(FZ.StateDefs.GAME_STATE_RESET==a&&1<arguments.length){if("yes"===arguments[1]){this.m_next_state=FZ.StateDefs.GAME_STATE_MAINMEN;this.m_diamondMgr.saveLevel();setTimeout(function(){FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN)},100);return}this.levelPauseEndTime=(new Date).getTime();this.levelPauseTime+=this.levelPauseEndTime-this.levelPauseStartTime;this.m_diamondMgr.setParent(this.m_main_div)}this.m_status=FZ.stateStatus.NORMAL;this.m_timer=setTimeout(FZ.Tools.bind(this,this.checkOver),0)},setText:function(a,b){a.innerHTML=""+b},preProcess:function(a){var b=this,c=0,e=c=null,c=FZ.GameBase.SaveObject.m_cur_level,b=this;if(void 0===c||0===c)FZ.GameBase.SaveObject.m_cur_level=1,FZ.GameBase.saveGame();if(this.m_load_ui)this.m_diamondMgr.setBubble(!1),this.m_main_div.style.display="inline";else{this.m_pause_div=document.createElement("div");this.m_pause_div.style.zIndex=200;c=FZ.getImgInfo("PAUSE_BG");FZ.GameBase.setCss(this.m_pause_div,c);this.m_main_div.appendChild(this.m_pause_div);this.m_pause_div.style.display="none";this.textPauseDiv=document.createElement("div");this.textPauseDiv.style.width="145px";this.textPauseDiv.style.height="35px";this.textPauseDiv.style.left="88px";this.textPauseDiv.style.top="28px";this.textPauseDiv.style.position="absolute";this.m_pause_div.appendChild(this.textPauseDiv);this.textPauseDiv.style.zIndex=201;this.createPauseTextSprite(this.textPauseDiv,FZ.GameText.TEXT_PAUSED,this.COLOR_PAUSE,this.LABEL_PAUSE_SIZE);this.m_str_nomatch_div=document.createElement("div");this.m_str_nomatch_div.style.zIndex=200;c=FZ.getImgInfo("NO_MORE_MATCHS");FZ.GameBase.setCss(this.m_str_nomatch_div,c);this.m_main_div.appendChild(this.m_str_nomatch_div);this.m_str_nomatch_div.style.display="none";this.createLabelTextSprite(this.m_str_nomatch_div,FZ.GameText.TEXT_NO_MORE_MATCHES,this.COLOR_NOMATCH,this.LABEL_TEXT_SIZE_MIDDLE);c=FZ.GameBase.SaveObject.m_hint;this.m_hint_num_div=[];for(c=FZ.AG.SearchSpecialPath.setNumDiv(this.m_hint_num_div,c);0<c;)this.m_main_div.appendChild(this.m_hint_num_div[c-1]),c--;this.createUIs(this.CUR_UI_DEFS);c=this.createLevelTextSprite(8,20,65,25,FZ.GameText.TEXT_LEVEL,"#792b0e",this.LABEL_TEXT_SIZE_MIDDLE);this.m_main_div.appendChild(c);for(c=0;c<this.UI_ARROW_KINDS;c++)this.m_ui_list[this.UI_ARROW_START_INDEX+c].style.display="none";FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD?this.createBtns(this.CUR_BTN_DEFS,!0):this.createBtns(this.CUR_BTN_ANDROID_DEFS,!0);c=FZ.getImgInfo(this.CUR_SWITCH_DEFS[0]);e=FZ.getImgInfo(this.CUR_SWITCH_DEFS[1]);this.m_btn_list[this.BTN_PAUSE_INDEX].setSwitchButton(c.fileURL,e.fileURL);FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(c=FZ.getImgInfo(this.SOUND_SWITCH_DEFS[0]),e=FZ.getImgInfo(this.SOUND_SWITCH_DEFS[1]),this.m_btn_list[this.BTN_SOUND_INDEX].setSwitchButton(c.fileURL,e.fileURL));this.m_diamondMgr=new FZ.DiamondManager;this.m_diamondMgr.m_parent=this.m_main_div;this.m_diamondMgr.setBubble(!1);FZ.DivManager.addChild(this.m_main_div);this.m_load_ui=!0}this.m_curLevel_div=this.m_ui_list[this.UI_LEVEL_NUM_INDEX];this.m_curLevel10_div=this.m_ui_list[this.UI_LEVEL_TEN_INDEX];this.m_time_bar_div=this.m_ui_list[this.UI_TIME_BAR_INDEX];c=FZ.getImgInfo(this.CUR_UI_DEFS[this.UI_TIME_BAR_INDEX]);this.m_time_bar_w=c.w;this.m_time_bar_div.style.width=this.m_time_bar_w+"px";this.m_diamondMgr.setObserver(this);if(FZ.StateDefs.GAME_STATE_MAINMEN===a||FZ.StateDefs.GAME_STATE_OVER===a||FZ.StateDefs.GAME_STATE_HELP===a)!0===FZ.GameBase.SaveObject.m_gamein?(this.m_diamondMgr.resumeLevel(),a=FZ.GameBase.SaveObject.m_cur_hintCount):(this.m_diamondMgr.initAllPets(!0),a=FZ.GameBase.SaveObject.m_hint),this.m_diamondMgr.setHintCount(a),this.m_btn_list[this.BTN_HINT_INDEX].setEnable(!0),this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT.png )",this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="visible",10<=a?(c=Math.floor(a%10),this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+c+".png )",c=Math.floor(a/10),this.m_hint_num_div[1].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+c+".png )"):0===a?(this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT_GREY.png )",this.m_btn_list[this.BTN_HINT_INDEX].setEnable(!1),this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden"):(this.m_hint_num_div[1].style.visibility="hidden",this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+a+".png )"),this.m_diamondMgr.hidePets();c=FZ.getImgInfo("NUM_LEVEL_"+FZ.GameBase.SaveObject.m_cur_level);10===FZ.GameBase.SaveObject.m_cur_level?(this.m_curLevel_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)",this.m_curLevel_div.style.display="inline",this.m_curLevel10_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_1.png )",this.m_curLevel10_div.style.display="inline"):(this.m_curLevel_div.style.backgroundImage="url(./linkMonsters/res/images/"+c.fileURL+")",this.m_curLevel_div.style.display="inline",this.m_curLevel10_div.style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)",this.m_curLevel10_div.style.display="inline");if(!0===FZ.GameBase.SaveObject.m_gamein){this.m_levelStart=!0;this.curLevelUsedTime=FZ.GameBase.SaveObject.m_level_usedTime;this.m_diamondMgr.showPets();for(c=0;c<this.UI_ARROW_KINDS;c++)this.m_ui_list[this.UI_ARROW_START_INDEX+c].style.display="none";this.m_diamondMgr.setParent(this.m_main_div)}else switch(this.curLevelUsedTime=0,this.m_diamondMgr.setLevel(FZ.GameBase.SaveObject.m_cur_level),c=this.m_diamondMgr.getLevel(),c){case 1:case 2:case 4:case 6:this.m_levelStart=!0;this.m_diamondMgr.showPets();for(c=0;c<this.UI_ARROW_KINDS;c++)this.m_ui_list[this.UI_ARROW_START_INDEX+c].style.display="none";this.m_diamondMgr.setParent(this.m_main_div);break;case 3:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX].style.display="inline";break;case 5:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+1].style.display="inline";break;case 7:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+2].style.display="inline";break;case 8:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+3].style.display="inline";break;case 9:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+4].style.display="inline";break;case 10:this.m_levelStart=!1,this.m_diamondMgr.hidePets(),this.m_ui_list[this.UI_ARROW_START_INDEX+5].style.display="inline"}this.levelPauseEndTime=this.levelPauseStartTime=this.levelCurrentTime=this.levelStartTime=(new Date).getTime();this.levelPauseTime=0;this.resetTranslate(0);FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_sound=FZ.GameBase.SaveObject.m_sound,!0===this.m_sound?this.m_btn_list[this.BTN_SOUND_INDEX].setSwitchState(this.m_btn_list[this.BTN_SOUND_INDEX].SWITCH_ON):this.m_btn_list[this.BTN_SOUND_INDEX].setSwitchState(this.m_btn_list[this.BTN_SOUND_INDEX].SWITCH_OFF));this.m_btn_list[this.BTN_HOME_INDEX].m_div.style.display="none";this.m_diamondMgr.setBonusTime(0);setTimeout(function(){b.fade_in.call(b,2E3,1)},10);this.m_timer=setTimeout(FZ.Tools.bind(this,this.checkOver),0);this.m_call_time=FZ.Tools.bind(this,this.checkOver)},postProcess:function(){this.m_diamondMgr.removeEvent();this.m_next_state===FZ.StateDefs.GAME_STATE_OVER||this.m_next_state===FZ.StateDefs.GAME_STATE_RESET||this.m_next_state===FZ.StateDefs.GAME_STATE_NEXT_LEVEL||this.m_next_state===FZ.StateDefs.GAME_STATE_GAME_WIN?this.m_main_div.style.display="inline":(this.m_main_div.style.display="none",this.fade_out(2E3,0,0))},mouseHandler:function(a){a.preventDefault();FZ.EventRemove(this,this.m_main_div,FZ.EVENT_DEF.T_START,this.m_call_tStart);FZ.EventRemove(this,this.m_main_div,FZ.EVENT_DEF.M_CLICK,this.m_call_mClick);this.m_levelStart=!0;this.m_diamondMgr.showPets();for(a=0;a<this.UI_ARROW_KINDS;a++)this.m_ui_list[this.UI_ARROW_START_INDEX+a].style.display="none";this.levelPauseEndTime=this.levelPauseStartTime=this.levelCurrentTime=this.levelStartTime=(new Date).getTime();this.m_levelLeftTime=this.levelPauseTime=0;this.m_diamondMgr.setParent(this.m_main_div)},checkOver:function(){if(void 0!==FZ.GameBase.CurrentState)if(FZ.StateDefs.GAME_STATE_GAME_IN!==FZ.GameBase.CurrentState.StateName)clearTimeout(this.m_timer);else{var a=0,b=this.m_diamondMgr.getLevel();if(this.m_levelStart)if(!0===this.m_isNoMatch)this.m_str_nomatch_div.style.display="inline",b=(new Date).getTime(),2<Math.floor(b-this.levelCurrentTime)/1E3&&(this.m_diamondMgr.ResetPosition(),this.m_diamondMgr.searchHasMatch()||this.m_diamondMgr.ResetTwoPosition(),this.m_isNoMatch=!1,this.levelPauseTime+=3200,this.m_str_nomatch_div.style.display="none"),this.m_timer=setTimeout(this.m_call_time,200);else if(this.m_gamePause||this.pageHiddin)this.m_timer=setTimeout(FZ.Tools.bind(this,this.checkOver),100);else{!0===this.m_showPage&&FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_showPage=!1,this.levelPauseEndTime=(new Date).getTime(),this.levelPauseTime+=this.levelPauseEndTime-this.levelPauseStartTime);b=FZ.GameBase.SaveObject.m_cur_level;c=Math.floor(((new Date).getTime()-this.levelPauseTime-this.levelStartTime)/1E3+this.curLevelUsedTime);a=this.m_time_bar_w/FZ.GameDefs.LEVEL_TIME[FZ.GameBase.SaveObject.m_cur_level];c-=this.m_diamondMgr.getBonusTime();c>=FZ.GameDefs.LEVEL_TIME[FZ.GameBase.SaveObject.m_cur_level]?c=FZ.GameDefs.LEVEL_TIME[FZ.GameBase.SaveObject.m_cur_level]:0>c&&(c=0);this.m_time_bar_div.style.width=(FZ.GameDefs.LEVEL_TIME[b]-c)*a+"px";e=FZ.AG.SearchSpecialPath.setScoreNum(FZ.GameBase.SaveObject.score+this.m_diamondMgr.getScore());for(a=e.length-1;0<=a;a--)this.m_ui_list[this.UI_SCORE_START_INDEX+5-e.length+a].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_"+e[e.length-1-a]+".png)";if(5>e.length)for(a=0;a<5-e.length;a++)this.m_ui_list[this.UI_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)";this.m_level_usedTime=c;FZ.GameDefs.LEVEL_TIME[b]<=c?(b=FZ.GameBase.SaveObject.score,c=this.m_diamondMgr.getScore(),this.m_timer=setTimeout(FZ.Tools.bind(this,this.setGameOver),c+b),this.m_diamondMgr.setBubble(!0)):(this.m_timer=setTimeout(this.m_call_time,1500),this.m_diamondMgr.saveLevel())}else{for(var c=Math.floor((new Date).getTime()-this.levelCurrentTime)/1E3,e=FZ.AG.SearchSpecialPath.setScoreNum(FZ.GameBase.SaveObject.score+this.m_diamondMgr.getScore()),a=0;a<e.length;a++)this.m_ui_list[this.UI_SCORE_START_INDEX+5-e.length+a].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_"+e[e.length-1-a]+".png)";if(5>e.length)for(a=0;a<5-e.length;a++)this.m_ui_list[this.UI_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)";switch(b){case 3:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX].style.display="inline";break;case 5:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+1].style.display="inline";break;case 7:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+2].style.display="inline";break;case 8:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+3].style.display="inline";break;case 9:this.m_levelStart=!1;this.m_diamondMgr.hidePets();this.m_ui_list[this.UI_ARROW_START_INDEX+4].style.display="inline";break;case 10:this.m_levelStart=!1,this.m_diamondMgr.hidePets(),this.m_ui_list[this.UI_ARROW_START_INDEX+5].style.display="inline"}FZ.TARGET_DEF.MOBILE===FZ.TargetPort?null===this.m_call_tStart&&FZ.EventHandler(this,this.m_main_div,FZ.EVENT_DEF.T_START,this.mouseHandler):null===this.m_call_mClick&&FZ.EventHandler(this,this.m_main_div,FZ.EVENT_DEF.M_CLICK,this.mouseHandler);if(3<c){this.m_levelStart=!0;this.m_diamondMgr.showPets();for(a=0;a<this.UI_ARROW_KINDS;a++)this.m_ui_list[this.UI_ARROW_START_INDEX+a].style.display="none";this.levelPauseEndTime=this.levelPauseStartTime=this.levelCurrentTime=this.levelStartTime=(new Date).getTime();this.m_levelLeftTime=this.levelPauseTime=0;this.m_diamondMgr.setParent(this.m_main_div)}this.m_timer=setTimeout(this.m_call_time,200);this.m_diamondMgr.setBubble(!0)}}},checkWin:function(){var a=this.m_diamondMgr.getLevel();(new Date).getTime();if(0===this.m_diamondMgr.getLeftPet()){var b=FZ.GameBase.SaveObject.score,c=30*(FZ.GameDefs.LEVEL_TIME[a]-this.m_level_usedTime),e=this.m_diamondMgr.getScore()+c,f=FZ.GameBase.SaveObject.m_usedTime+this.m_level_usedTime,g=FZ.GameBase.SaveObject.m_hint-this.m_diamondMgr.getHintCount();FZ.GameBase.SaveObject.m_usedTime=f;var d=FZ.GameBase.SaveObject.m_totalUsedHint+g;FZ.GameBase.SaveObject.m_totalUsedHint=d;for(var h=FZ.AG.SearchSpecialPath.setScoreNum(FZ.GameBase.SaveObject.score+e),k=h.length-1;0<=k;k--)this.m_ui_list[this.UI_SCORE_START_INDEX+5-h.length+k].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_"+h[h.length-1-k]+".png)";if(5>h.length)for(k=0;k<5-h.length;k++)this.m_ui_list[this.UI_SCORE_START_INDEX+k].style.backgroundImage="url(./linkMonsters/res/images/NUM_LEVEL_0.png)";a===FZ.GameDefs.MAX_LEVEL_RANK?(clearTimeout(this.m_timer),this.m_diamondMgr.setBubble(!1),this.m_next_state=FZ.StateDefs.GAME_STATE_GAME_WIN,this.pause(),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_WIN,e+b,f,d),FZ.GameBase.SaveObject.pass=!0,FZ.GameBase.SaveObject.score+=e,FZ.GameBase.SaveObject.m_hint=this.m_diamondMgr.getHintCount()):(clearTimeout(this.m_timer),this.m_diamondMgr.setBubble(!1),this.m_next_state=FZ.StateDefs.GAME_STATE_NEXT_LEVEL,this.pause(),FZ.GameBase.pushState(this.StateName),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_NEXT_LEVEL,e,c,g),FZ.GameBase.SaveObject.score+=e,FZ.GameBase.SaveObject.m_cur_level=a+1,g<FZ.GameDefs.LEVEL_HINT_NUMBER[a]?FZ.GameBase.SaveObject.m_hint=1+FZ.GameDefs.LEVEL_HINT_NUMBER[a+1]:FZ.GameBase.SaveObject.m_hint=FZ.GameDefs.LEVEL_HINT_NUMBER[a+1]);FZ.GameBase.saveGame()}},checkNoMatch:function(){this.m_diamondMgr.searchHasMatch()||(this.m_isNoMatch=!0);this.m_isNoMatch&&(this.levelCurrentTime=(new Date).getTime())},setGameOver:function(){this.m_diamondMgr.setBubble(!1);clearTimeout(this.m_timer);this.m_next_state=FZ.StateDefs.GAME_STATE_OVER;this.pause();var a=this.m_diamondMgr.getScore(),b=FZ.GameBase.SaveObject.score;FZ.GameBase.pushState(this.StateName);FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_OVER,a+b);FZ.GameBase.SaveObject.score=0;FZ.GameBase.SaveObject.m_cur_level=1;FZ.GameBase.SaveObject.m_hint=FZ.GameDefs.LEVEL_HINT_NUMBER[1];FZ.GameBase.SaveObject.m_totalUsedHint=0;FZ.GameBase.SaveObject.m_gamein=!1;FZ.GameBase.SaveObject.m_cur_score=0;FZ.GameBase.SaveObject.m_cur_hintCount=FZ.GameDefs.LEVEL_HINT_NUMBER[1];FZ.GameBase.SaveObject.m_cur_left_pet=FZ.GameDefs.ALL_PET_NUM;FZ.GameBase.SaveObject.m_level_usedTime=0;FZ.GameBase.SaveObject.m_usedTime=0;FZ.GameBase.saveGame()},setNextLevel:function(a,b){clearTimeout(this.m_timer);this.m_diamondMgr.setBubble(!1);this.m_next_state=FZ.StateDefs.GAME_STATE_NEXT_LEVEL;this.pause();FZ.GameBase.pushState(this.StateName);FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_NEXT_LEVEL,a,b)},setGameWin:function(a,b){clearTimeout(this.m_timer);this.m_diamondMgr.setBubble(!1);this.m_next_state=FZ.StateDefs.GAME_STATE_GAME_WIN;this.pause();FZ.GameBase.pushState(this.StateName);FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_WIN,a,b)},buttonClick:function(a){if(void 0!==FZ.GameBase.CurrentState&&FZ.StateDefs.GAME_STATE_GAME_IN===FZ.GameBase.CurrentState.StateName&&!0!==this.m_isNoMatch)if(this.m_btn_list[this.BTN_HOME_INDEX]===a){this.m_gamePause=!this.m_gamePause;this.m_btn_list[this.BTN_HOME_INDEX].m_div.style.display="none";this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.display="inline";var b=this.m_diamondMgr.getHintCount();10<b?(this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="visible"):0===b?(this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden"):(this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="hidden");FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_btn_list[this.BTN_SOUND_INDEX].m_div.style.display="inline");this.m_pause_div.style.display="none";this.m_diamondMgr.m_reset_finished=!0;FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].SWITCH_OFF===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_btn_state&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_OFF.png)"),FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].SWITCH_ON===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_btn_state&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND.png)"));this.m_btn_list[this.BTN_PAUSE_INDEX].setSwitchState(this.m_btn_list[this.BTN_PAUSE_INDEX].SWITCH_ON);this.levelPauseEndTime=(new Date).getTime();this.levelPauseTime+=this.levelPauseEndTime-this.levelPauseStartTime;this.m_next_state=FZ.StateDefs.GAME_STATE_MAINMEN;this.m_diamondMgr.setBubble(!1);this.levelPauseStartTime=(new Date).getTime();FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN)}else if(this.m_btn_list[this.BTN_HINT_INDEX]===a){if(this.m_diamondMgr.setBubble(!1),!this.m_gamePause){if(0<this.m_diamondMgr.getHintCount()&&!0===this.m_diamondMgr.searchHint())if(b=this.m_diamondMgr.getHintCount(),this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="visible",10<=b){var c=Math.floor(b%10);this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+c+".png )";c=Math.floor(b/10);this.m_hint_num_div[1].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+c+".png )"}else this.m_hint_num_div[1].style.visibility="hidden",this.m_hint_num_div[0].style.backgroundImage="url(./linkMonsters/res/images/number_hint_"+b+".png )";0===this.m_diamondMgr.getHintCount()&&(a.setEnable(!1),a.m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT_GREY.png )",this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden")}}else this.m_btn_list[this.BTN_PAUSE_INDEX]===a?(this.m_gamePause=!this.m_gamePause,!0===this.m_gamePause?(this.m_btn_list[this.BTN_HOME_INDEX].m_div.style.display="inline",this.m_btn_list[this.BTN_HOME_INDEX].setEnable(!0),this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.display="none",this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden",FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_btn_list[this.BTN_SOUND_INDEX].m_div.style.display="none"),this.levelPauseStartTime=(new Date).getTime(),this.m_pause_div.style.display="inline",a.setSwitchState(a.SWITCH_OFF),this.m_diamondMgr.m_reset_finished=!1,this.m_diamondMgr.setBubble(!1),this.m_diamondMgr.hidePets()):(this.m_diamondMgr.showPets(),this.m_btn_list[this.BTN_HOME_INDEX].m_div.style.display="none",this.m_btn_list[this.BTN_HINT_INDEX].m_div.style.display="inline",b=this.m_diamondMgr.getHintCount(),10<b?(this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="visible"):0===b?(this.m_hint_num_div[0].style.visibility="hidden",this.m_hint_num_div[1].style.visibility="hidden"):(this.m_hint_num_div[0].style.visibility="visible",this.m_hint_num_div[1].style.visibility="hidden"),FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(this.m_btn_list[this.BTN_SOUND_INDEX].m_div.style.display="inline"),this.m_pause_div.style.display="none",this.m_diamondMgr.m_reset_finished=!0,0!==this.m_diamondMgr.getHintCount()&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_HINT_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_HINT.png)"),void 0!==FZ.Game.GameState.BTN_SOUND_INDEX&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].SWITCH_OFF===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_btn_state&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND_OFF.png)"),FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].SWITCH_ON===FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_btn_state&&(FZ.Game.GameState.m_btn_list[FZ.Game.GameState.BTN_SOUND_INDEX].m_div.style.backgroundImage="url(./linkMonsters/res/images/BTN_SOUND.png)")),a.setSwitchState(a.SWITCH_ON),this.levelPauseEndTime=(new Date).getTime(),this.levelPauseTime+=this.levelPauseEndTime-this.levelPauseStartTime),this.m_diamondMgr.saveLevel()):void 0===this.m_btn_list[this.BTN_SOUND_INDEX]||this.m_btn_list[this.BTN_SOUND_INDEX]!==a||this.m_gamePause||((this.m_sound=!this.m_sound)?(a.setSwitchState(a.SWITCH_ON),FZ.Music.setMute(!1)):(a.setSwitchState(a.SWITCH_OFF),FZ.Music.setMute(!0)),FZ.GameBase.SaveObject.m_sound=this.m_sound,FZ.GameBase.saveGame())},debugLevel:function(){var a=this.m_diamondMgr.getLevel(),b=this.m_diamondMgr.getScore()+20*this.m_levelLeftTime;9>a&&(FZ.GameBase.SaveObject.m_cur_level=a+1);9===a?(clearTimeout(this.m_timer),this.m_diamondMgr.setBubble(!1),this.m_next_state=FZ.StateDefs.GAME_STATE_GAME_WIN,this.pause(),FZ.GameBase.pushState(this.StateName),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_GAME_WIN,this.m_levelLeftTime,b)):(clearTimeout(this.m_timer),this.m_diamondMgr.setBubble(!1),this.m_next_state=FZ.StateDefs.GAME_STATE_NEXT_LEVEL,this.pause(),FZ.GameBase.pushState(this.StateName),FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_NEXT_LEVEL,this.m_levelLeftTime,b))},pageHide:function(a){null!==FZ.Game.GameState.m_diamondMgr&&(FZ.Game.GameState.m_diamondMgr.m_reset_finished=!1,FZ.Game.GameState.m_diamondMgr.setBubble(!1),FZ.Game.GameState.levelPauseStartTime=(new Date).getTime(),FZ.Game.GameState.pageHiddin=!0)},pageShow:function(a){FZ.Game.GameState.m_showPage=!0;null!==FZ.Game.GameState.m_diamondMgr&&(FZ.Game.GameState.m_diamondMgr.m_reset_finished=!0,FZ.Game.GameState.pageHiddin=!1)}},FZ.BaseState));FZ.TargetMobile!==FZ.TARGET_DEF.ANDRIOD&&(window.addEventListener("pagehide",FZ.Game.GameState.pageHide,!1),window.addEventListener("pageshow",FZ.Game.GameState.pageShow,!1))})();FZ.Game.GameOverState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_OVER,CUR_UI_DEFS:"GAME_OVER_BG NUM_STAGE_OVER_TOTAL_1 NUM_STAGE_OVER_TOTAL_2 NUM_STAGE_OVER_TOTAL_3 NUM_STAGE_OVER_TOTAL_4 NUM_STAGE_OVER_TOTAL_5".split(" "),UI_SCORE_START_INDEX:1,TOTAL_SCORE:5,BTN_REPLAY_INDEX:0,CUR_BTN_DEFS:[["BTN_RETRY","BTN_RETRY_TOUCH"]],STR_RECT:[173,280,138,36],m_load_ui:!1,popState:!1,COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,m_title_div:null,m_conten_div:null,createLabelTitleTextSprite:function(a,b,c,e,f,g){this.m_title_div=document.createElement("div");this.m_title_div.style.width=c+"px";this.m_title_div.style.height=e+"px";this.m_title_div.style.left=a+"px";this.m_title_div.style.top=b+"px";this.m_title_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_title_div);this.m_title_div.style.zIndex=300;this.m_title_div.style.textAlign="center";this.m_title_div.style.lineHeight=Math.round(e-2)+"px";this.m_title_div.style.fontFamily="Arial";this.m_title_div.style.fontWeight="bolder";this.m_title_div.style.fontSize=Math.round(e-20)+"px";this.m_title_div.style.textShadow="-1px -1px 1px #972301, 1px 1px 1px #972301, 1px -1px 1px #972301, -1px 1px 1px #972301 ";this.m_title_div.style.color=g;this.m_title_div.innerHTML=f},createLabelContentTextSprite:function(a,b,c,e,f,g){this.m_conten_div=document.createElement("div");this.m_conten_div.style.width=c+"px";this.m_conten_div.style.height=e+"px";this.m_conten_div.style.left=a+"px";this.m_conten_div.style.top=b+"px";this.m_conten_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_conten_div);this.m_conten_div.style.zIndex=300;this.m_conten_div.style.textAlign="center";this.m_conten_div.style.lineHeight=Math.round(e-2)+"px";this.m_conten_div.style.fontFamily="Arial";this.m_conten_div.style.fontWeight="900";this.m_conten_div.style.fontSize=Math.round(e-20)+"px";this.m_conten_div.style.textShadow="-1px -1px 1px #972301, 1px 1px 1px #972301, 1px -1px 1px #972301, -1px 1px 1px #972301 ";this.m_conten_div.style.color=g;this.m_conten_div.innerHTML=f},createBtnTextSprite:function(a,b,c){var e=a.m_h;a.m_div.style.textAlign="center";a.m_div.style.lineHeight=a.m_div.style.height;a.m_div.style.fontFamily="Arial";a.m_div.style.fontWeight="bold";a.m_div.style.fontSize=Math.round(e/3)+"px";a.m_div.style.textShadow="-2px -2px 2px #7c2e1a, 2px 2px 2px #7c2e1a, 2px -2px 2px #7c2e1a, -2px 2px 2px #7c2e1a ";a.m_div.style.color=c;a.m_div.innerHTML=b;return a},preProcess:function(a,b,c){a=0;this.m_load_ui?this.m_main_div.style.display="inline":(this.createUIs(this.CUR_UI_DEFS),this.createLabelTitleTextSprite(93,31,135,40,FZ.GameText.TEXT_GAME_OVER,"#FEE7B4"),this.createLabelContentTextSprite(45,85,230,35,FZ.GameText.TEXT_YOUR_TOTAL_SCORE,this.COLOR_YELLOW),this.createBtns(this.CUR_BTN_DEFS,!0),this.createBtnTextSprite(this.m_btn_list[this.BTN_REPLAY_INDEX],FZ.GameText.TEXT_RETRY,this.COLOR_ORANGE),FZ.DivManager.addChild(this.m_main_div),this.m_load_ui=!0);c=FZ.AG.SearchSpecialPath.setScoreNum(c);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_SCORE_START_INDEX+this.TOTAL_SCORE-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_SCORE)for(a=0;a<this.TOTAL_SCORE-c.length;a++)this.m_ui_list[this.UI_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";this.popState=!1},postProcess:function(){this.m_main_div.style.display="none"},createStrScoreDiv:function(){this.m_last_score_div=document.createElement("div");this.m_last_score_div.style.position="absolute";this.m_last_score_div.style.width=this.STR_RECT[2]+"px";this.m_last_score_div.style.height=this.STR_RECT[3]+"px";this.m_last_score_div.style.left=this.STR_RECT[0]+"px";this.m_last_score_div.style.top=this.STR_RECT[1]+"px";this.m_last_score_div.style.color="#fff";this.m_last_score_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";this.m_last_score_div.style.fontFamily="Arial";this.m_last_score_div.style.lineHeight=this.STR_RECT[3]+"px";this.m_last_score_div.style.textAlign="left";this.m_main_div.appendChild(this.m_last_score_div)},buttonClick:function(a){this.popState||this.m_btn_list[this.BTN_REPLAY_INDEX]===a&&(this.postProcess(),this.popState=!0,FZ.GameBase.popState(this.StateName))}},FZ.BaseState));FZ.Game.nextLevelState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_NEXT_LEVEL,CUR_UI_DEFS:"NEXT_LEVEL_BG NUM_STAGE_TOTAL_1 NUM_STAGE_TOTAL_2 NUM_STAGE_TOTAL_3 NUM_STAGE_TOTAL_4 NUM_STAGE_TOTAL_5 NUM_STAGE_TOTAL_TIME_BONUS_1 NUM_STAGE_TOTAL_TIME_BONUS_2 NUM_STAGE_TOTAL_TIME_BONUS_3 NUM_STAGE_TOTAL_TIME_BONUS_4 NUM_STAGE_TOTAL_TIME_BONUS_5 NUM_STAGE_TOTAL_HINT_1 NUM_STAGE_TOTAL_HINT_2 NUM_STAGE_TOTAL_HINT_3 NUM_STAGE_TOTAL_HINT_4 NUM_STAGE_TOTAL_HINT_5".split(" "),UI_TOTAL_SCORE_START_INDEX:1,UI_STAGE_SCORE_START_INDEX:6,UI_STAGE_HINT_START_INDEX:11,BTN_NEXT_LEVEL_INDEX:0,TOTAL_SCORE:5,TIME_BONUS:5,TOTAL_HINT:5,HINT_USED:5,CUR_BTN_DEFS:[["BTN_NEXT_LEVEL","BTN_NEXT_LEVEL_TOUCH"]],COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,m_title_div:null,m_conten_div:null,createLabelTitleTextSprite:function(a,b,c,e,f,g){this.m_title_div=document.createElement("div");this.m_title_div.style.width=c+"px";this.m_title_div.style.height=e+"px";this.m_title_div.style.left=a+"px";this.m_title_div.style.top=b+"px";this.m_title_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_title_div);this.m_title_div.style.zIndex=300;this.m_title_div.style.textAlign="center";this.m_title_div.style.lineHeight=Math.round(e-2)+"px";this.m_title_div.style.fontFamily="Arial";this.m_title_div.style.fontWeight="bolder";this.m_title_div.style.fontSize=Math.round(e/2)+"px";this.m_title_div.style.textShadow="-1px -1px 1px #4F5100, 1px 1px 1px #4F5100, 1px -1px 1px #4F5100, -1px 1px 1px #4F5100 ";this.m_title_div.style.color=g;this.m_title_div.innerHTML=f},createLabelContentTextSprite:function(a,b,c,e,f,g){this.m_conten_div=document.createElement("div");this.m_conten_div.style.width=c+"px";this.m_conten_div.style.height=e+"px";this.m_conten_div.style.left=a+"px";this.m_conten_div.style.top=b+"px";this.m_conten_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_conten_div);this.m_conten_div.style.zIndex=300;a=e-2;this.m_conten_div.style.textAlign="center";this.m_conten_div.style.lineHeight=Math.round(a)+"px";this.m_conten_div.style.fontFamily="Arial";this.m_conten_div.style.fontWeight="900";this.m_conten_div.style.fontSize=Math.round(a)+"px";this.m_conten_div.style.textShadow="-1px -1px 1px #AE0000, 1px 1px 1px #AE0000, 1px -1px 1px #AE0000, -1px 1px 1px #AE0000 ";this.m_conten_div.style.color=g;this.m_conten_div.innerHTML=f},createLabelContentTextSprite_:function(a,b,c,e,f,g){this.m_conten_div=document.createElement("div");this.m_conten_div.style.width=c+"px";this.m_conten_div.style.height=e+"px";this.m_conten_div.style.left=a+"px";this.m_conten_div.style.top=b+"px";this.m_conten_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_conten_div);this.m_conten_div.style.zIndex=300;a=e-2;this.m_conten_div.style.textAlign="center";this.m_conten_div.style.lineHeight=Math.round(a)+"px";this.m_conten_div.style.fontFamily="Arial";this.m_conten_div.style.fontWeight="900";this.m_conten_div.style.fontSize=Math.round(a)+"px";this.m_conten_div.style.textShadow="-1px -1px 1px #054747, 1px 1px 1px #054747, 1px -1px 1px #054747, -1px 1px 1px #054747 ";this.m_conten_div.style.color=g;this.m_conten_div.innerHTML=f},createBtnTextSprite:function(a,b,c){var e=a.m_h;a.m_div.style.textAlign="center";a.m_div.style.lineHeight=a.m_div.style.height;a.m_div.style.fontFamily="Arial";a.m_div.style.fontWeight="bold";a.m_div.style.fontSize=Math.round(e/4)+"px";a.m_div.style.textShadow="-2px -2px 2px #7c2e1a, 2px 2px 2px #7c2e1a, 2px -2px 2px #7c2e1a, -2px 2px 2px #7c2e1a ";a.m_div.style.color=c;a.m_div.innerHTML=b;return a},m_load_ui:!1,popState:!1,preProcess:function(a,b,c,e,f){a=0;var g=this;this.m_load_ui?this.m_main_div.style.display="inline":(this.createUIs(this.CUR_UI_DEFS),a=(320-parseInt(this.m_ui_list[0].style.width.substr(0,3)))/2,b=parseInt(this.m_ui_list[0].style.width.substr(0,3)),this.createLabelTitleTextSprite(a,29,b,40,FZ.GameText.TEXT_LEVEL_CLEAR,"#BEEB36"),this.createLabelContentTextSprite(a,77,b,22,FZ.GameText.TEXT_SCORE,"#FBCE1A"),this.createLabelContentTextSprite_(a,125,b,22,FZ.GameText.TEXT_TIME_BONUS,"#67F1F0"),this.createLabelContentTextSprite_(a,175,b,22,FZ.GameText.TEXT_USED_HINTS,"#67F1F0"),this.createBtns(this.CUR_BTN_DEFS,!0),this.createBtnTextSprite(this.m_btn_list[this.BTN_NEXT_LEVEL_INDEX],FZ.GameText.TEXT_NEXT_LEVEL,this.COLOR_ORANGE),FZ.DivManager.addChild(this.m_main_div),this.m_load_ui=!0);c=FZ.AG.SearchSpecialPath.setScoreNum(c);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_TOTAL_SCORE_START_INDEX+this.TOTAL_SCORE-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_SCORE)for(a=0;a<this.TOTAL_SCORE-c.length;a++)this.m_ui_list[this.UI_TOTAL_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";c=FZ.AG.SearchSpecialPath.setScoreNum(e);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_STAGE_SCORE_START_INDEX+this.TIME_BONUS-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TIME_BONUS)for(a=0;a<this.TIME_BONUS-c.length;a++)this.m_ui_list[this.UI_STAGE_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";c=FZ.AG.SearchSpecialPath.setScoreNum(f);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_STAGE_HINT_START_INDEX+this.TOTAL_HINT-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_HINT)for(a=0;a<this.TOTAL_HINT-c.length;a++)this.m_ui_list[this.UI_STAGE_HINT_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";this.popState=!1;setTimeout(function(){g.fade_in.call(g,2E3,1)},10);FZ.GameBase.SaveObject.m_gamein=!1;FZ.GameBase.saveGame()},createStrLeftTimeDiv:function(){this.m_last_left_time_div=document.createElement("div");this.m_last_left_time_div.style.position="absolute";this.m_last_left_time_div.style.width=this.STR_LEFT_TIME_RECT[2]+"px";this.m_last_left_time_div.style.height=this.STR_LEFT_TIME_RECT[3]+"px";this.m_last_left_time_div.style.left=this.STR_LEFT_TIME_RECT[0]+"px";this.m_last_left_time_div.style.top=this.STR_LEFT_TIME_RECT[1]+"px";this.m_last_left_time_div.style.color="#fff";this.m_last_left_time_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";this.m_last_left_time_div.style.fontFamily="Arial";this.m_last_left_time_div.style.lineHeight=this.STR_LEFT_TIME_RECT[3]+"px";this.m_last_left_time_div.style.textAlign="left";this.m_main_div.appendChild(this.m_last_left_time_div)},createStrScoreDiv:function(){this.m_last_score_div=document.createElement("div");this.m_last_score_div.style.position="absolute";this.m_last_score_div.style.width=this.STR_SCORE_RECT[2]+"px";this.m_last_score_div.style.height=this.STR_SCORE_RECT[3]+"px";this.m_last_score_div.style.left=this.STR_SCORE_RECT[0]+"px";this.m_last_score_div.style.top=this.STR_SCORE_RECT[1]+"px";this.m_last_score_div.style.color="#fff";this.m_last_score_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";this.m_last_score_div.style.fontFamily="Arial";this.m_last_score_div.style.lineHeight=this.STR_SCORE_RECT[3]+"px";this.m_last_score_div.style.textAlign="left";this.m_main_div.appendChild(this.m_last_score_div)},postProcess:function(){this.fade_out(2E3,0,0)},buttonClick:function(a){this.popState||this.m_btn_list[this.BTN_NEXT_LEVEL_INDEX]===a&&(this.postProcess(),this.popState=!0,FZ.GameBase.popState(this.StateName))}},FZ.BaseState));FZ.Game.winState=new(FZ.newClass({StateName:FZ.StateDefs.GAME_STATE_GAME_WIN,CUR_UI_DEFS:"YOU_WIN_BG NUM_STAGE_WIN_TOTAL_1 NUM_STAGE_WIN_TOTAL_2 NUM_STAGE_WIN_TOTAL_3 NUM_STAGE_WIN_TOTAL_4 NUM_STAGE_WIN_TOTAL_5 NUM_STAGE_WIN_TOTAL_TIME_1 NUM_STAGE_WIN_TOTAL_TIME_2 NUM_STAGE_WIN_TOTAL_TIME_3 NUM_STAGE_WIN_TOTAL_TIME_4 NUM_STAGE_WIN_TOTAL_TIME_5 NUM_STAGE_TOTAL_HINT_1 NUM_STAGE_TOTAL_HINT_2 NUM_STAGE_TOTAL_HINT_3 NUM_STAGE_TOTAL_HINT_4 NUM_STAGE_TOTAL_HINT_5".split(" "),UI_TOTAL_SCORE_START_INDEX:1,UI_TOTAL_TIME_START_INDEX:6,UI_TOTAL_HINT_START_INDEX:11,TOTAL_SCORE:5,TOTAL_TIME:5,TOTAL_HINT:5,BTN_MAIN_MENU_IDNEX:0,CUR_BTN_DEFS:[["BTN_MAIN_MENU","BTN_MAIN_MENU_TOUCH"]],STR_LEFT_TIME_RECT:[100,215,50,36],STR_LEFT_TIME_BONUS_RECT:[203,215,30,36],STR_SCORE_RECT:[160,277,138,36],m_load_ui:!1,COLOR_YELLOW:"#F0D751",COLOR_BROWN:"#B97F00",COLOR_ORANGE:"#FFC72A",LABEL_TEXT_SIZE_SMALL:12,LABEL_TEXT_SIZE_MIDDLE:18,LABEL_TEXT_SIZE_LARGE:24,m_title_div:null,m_conten_div1:null,m_conten_div2:null,m_conten_div3:null,createLabelTitleTextSprite:function(a,b,c,e,f,g){this.m_title_div=document.createElement("div");this.m_title_div.style.width=c+"px";this.m_title_div.style.height=e+"px";this.m_title_div.style.left=a+"px";this.m_title_div.style.top=b+"px";this.m_title_div.style.position="absolute";this.m_ui_list[0].appendChild(this.m_title_div);this.m_title_div.style.zIndex=300;this.m_title_div.style.textAlign="center";this.m_title_div.style.lineHeight=Math.round(e-2)+"px";this.m_title_div.style.fontFamily="Arial";this.m_title_div.style.fontWeight="bolder";this.m_title_div.style.fontSize=Math.round(e/2)+"px";this.m_title_div.style.textShadow="-1px -1px 1px #4F5100, 1px 1px 1px #4F5100, 1px -1px 1px #4F5100, -1px 1px 1px #4F5100 ";this.m_title_div.style.color=g;this.m_title_div.innerHTML=f},createLabelContentTextSprite:function(a,b,c,e,f,g,d){a=document.createElement("div");a.style.width=e+"px";a.style.height=f+"px";a.style.left=b+"px";a.style.top=c+"px";a.style.position="absolute";this.m_ui_list[0].appendChild(a);a.style.zIndex=300;b=f-2;a.style.textAlign="center";a.style.lineHeight=Math.round(b)+"px";a.style.fontFamily="Arial";a.style.fontWeight="900";a.style.fontSize=Math.round(b)+"px";a.style.textShadow="-1px -1px 1px #AE0000, 1px 1px 1px #AE0000, 1px -1px 1px #AE0000, -1px 1px 1px #AE0000 ";a.style.color=d;a.innerHTML=g},createLabelContentTextSprite_:function(a,b,c,e,f,g,d){a=document.createElement("div");a.style.width=e+"px";a.style.height=f+"px";a.style.left=b+"px";a.style.top=c+"px";a.style.position="absolute";this.m_ui_list[0].appendChild(a);a.style.zIndex=300;b=f-2;a.style.textAlign="center";a.style.lineHeight=Math.round(b)+"px";a.style.fontFamily="Arial";a.style.fontWeight="900";a.style.fontSize=Math.round(b)+"px";a.style.textShadow="-1px -1px 1px #054747, 1px 1px 1px #054747, 1px -1px 1px #054747, -1px 1px 1px #054747 ";a.style.color=d;a.innerHTML=g},createBtnTextSprite:function(a,b,c){var e=a.m_h;a.m_div.style.textAlign="center";a.m_div.style.lineHeight=a.m_div.style.height;a.m_div.style.fontFamily="Arial";a.m_div.style.fontWeight="bold";a.m_div.style.fontSize=Math.round(e/4)+"px";a.m_div.style.textShadow="-2px -2px 2px #7c2e1a, 2px 2px 2px #7c2e1a, 2px -2px 2px #7c2e1a, -2px 2px 2px #7c2e1a ";a.m_div.style.color=c;a.m_div.innerHTML=b;return a},preProcess:function(a,b,c,e,f){a=0;var g=this;this.m_load_ui?this.m_main_div.style.display="inline":(this.createUIs(this.CUR_UI_DEFS),a=(320-parseInt(this.m_ui_list[0].style.width.substr(0,3)))/2,b=parseInt(this.m_ui_list[0].style.width.substr(0,3)),this.createLabelTitleTextSprite(a,35,b-20,40,FZ.GameText.TEXT_GAME_COMPLETE,"#BEEB36"),this.createLabelContentTextSprite_(this.m_conten_div1,a,77,b,22,FZ.GameText.TEXT_TOTAL_SCORE,"#67F1F0"),this.createLabelContentTextSprite(this.m_conten_div2,a,120,b,22,FZ.GameText.TEXT_USED_TIME,"#FBCE1A"),this.createLabelContentTextSprite_(this.m_conten_div3,a,172,b,22,FZ.GameText.TEXT_USED_HINTS,"#67F1F0"),this.createBtns(this.CUR_BTN_DEFS,!0),this.createBtnTextSprite(this.m_btn_list[this.BTN_MAIN_MENU_IDNEX],FZ.GameText.TEXT_MAIN_MENU,this.COLOR_ORANGE),FZ.DivManager.addChild(this.m_main_div),this.m_load_ui=!0);c=FZ.AG.SearchSpecialPath.setScoreNum(c);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_TOTAL_SCORE_START_INDEX+this.TOTAL_SCORE-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_SCORE)for(a=0;a<this.TOTAL_SCORE-c.length;a++)this.m_ui_list[this.UI_TOTAL_SCORE_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";c=FZ.AG.SearchSpecialPath.setScoreNum(e);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_TOTAL_TIME_START_INDEX+this.TOTAL_TIME-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_TIME)for(a=0;a<this.TOTAL_TIME-c.length;a++)this.m_ui_list[this.UI_TOTAL_TIME_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";c=FZ.AG.SearchSpecialPath.setScoreNum(f);for(a=0;a<c.length;a++)this.m_ui_list[this.UI_TOTAL_HINT_START_INDEX+this.TOTAL_HINT-c.length+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_"+c[c.length-1-a]+".png)";if(c.length<this.TOTAL_HINT)for(a=0;a<this.TOTAL_HINT-c.length;a++)this.m_ui_list[this.UI_TOTAL_HINT_START_INDEX+a].style.backgroundImage="url(./linkMonsters/res/images/number_score_0.png)";setTimeout(function(){g.fade_in.call(g,2E3,1)},10);FZ.GameBase.SaveObject.m_gamein=!1;FZ.GameBase.saveGame()},createStrLeftTimeDiv:function(){this.m_last_left_time_div=document.createElement("div");this.m_last_left_time_div.style.position="absolute";this.m_last_left_time_div.style.width=this.STR_LEFT_TIME_RECT[2]+"px";this.m_last_left_time_div.style.height=this.STR_LEFT_TIME_RECT[3]+"px";this.m_last_left_time_div.style.left=this.STR_LEFT_TIME_RECT[0]+"px";this.m_last_left_time_div.style.top=this.STR_LEFT_TIME_RECT[1]+"px";this.m_last_left_time_div.style.color="#fff";this.m_last_left_time_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";this.m_last_left_time_div.style.fontFamily="Arial";this.m_last_left_time_div.style.lineHeight=this.STR_LEFT_TIME_RECT[3]+"px";this.m_last_left_time_div.style.textAlign="left";this.m_main_div.appendChild(this.m_last_left_time_div)},createStrScoreDiv:function(){this.m_last_score_div=document.createElement("div");this.m_last_score_div.style.position="absolute";this.m_last_score_div.style.width=this.STR_SCORE_RECT[2]+"px";this.m_last_score_div.style.height=this.STR_SCORE_RECT[3]+"px";this.m_last_score_div.style.left=this.STR_SCORE_RECT[0]+"px";this.m_last_score_div.style.top=this.STR_SCORE_RECT[1]+"px";this.m_last_score_div.style.color="#fff";this.m_last_score_div.style.fontSize=FZ.GameDefs.STATS_FONT_SIZE+"px";this.m_last_score_div.style.fontFamily="Arial";this.m_last_score_div.style.lineHeight=this.STR_SCORE_RECT[3]+"px";this.m_last_score_div.style.textAlign="left";this.m_main_div.appendChild(this.m_last_score_div)},postProcess:function(){this.fade_out(2E3,0,0)},buttonClick:function(a){this.m_btn_list[this.BTN_MAIN_MENU_IDNEX]===a&&(FZ.GameBase.switchToState(FZ.StateDefs.GAME_STATE_MAINMEN),FZ.Game.GameState.m_main_div.style.display="none",FZ.Game.GameState.fade_out(2E3,0,0))}},FZ.BaseState))})();